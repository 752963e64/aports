# Contributor: Bart Ribbers <bribbers@disroot.org>
# Maintainer: Bart Ribbers <bribbers@disroot.org>
pkgname=nymphrpc
pkgver=0_git20210526
pkgrel=0
_commit="12aca6111c58615e3c413ac63b5d1f9a69343cc7"
arch="all !mips !mips64" # blocked by poco
url="https://github.com/MayaPosch/NymphRPC"
pkgdesc="Versatile and fast remote procedure call library"
license="BSD-3-Clause"
depends_dev="poco-dev"
makedepends="$depends_dev"
subpackages="$pkgname-static $pkgname-dev"
source="https://github.com/MayaPosch/NymphRPC/archive/$_commit/nymphrpc-$_commit.tar.gz"
options="!check" # Tests are broken
builddir="$srcdir/NymphRPC-$_commit"

build() {
	make lib
}

check() {
	make test
}

package() {
	DESTDIR="$pkgdir" PREFIX="/usr" make install
}

sha512sums="
df5e151a69dba9daf93dba3955b795d4479342ef67dc84df404be0d71263676aeee14c8460224d0c16eec0e32762f79db13679c8dd8edd7b6f6a50e83d8f9f07  nymphrpc-12aca6111c58615e3c413ac63b5d1f9a69343cc7.tar.gz
"
