# Contributor: Maxim Karasev <begs@disroot.org>
# Contributor: Dmitry Kruchko <corg@disroot.org>
# Maintainer: Maxim Karasev <begs@disroot.org>
pkgname=libsixel
pkgver=1.10.3_git20221121
pkgrel=0
_commit=490ec15087e37d8e1395e4dbfb99fc543c5bae5d
pkgdesc="SIXEL encoder/decoder implementation"
url="https://github.com/libsixel/libsixel"
arch="all"
license="MIT"
makedepends="meson libpng-dev libjpeg-turbo-dev zlib-dev libtool"
subpackages="
	$pkgname-dev
	$pkgname-doc
	$pkgname-bash-completion
	$pkgname-zsh-completion
	"
source="https://github.com/libsixel/libsixel/archive/$_commit.tar.gz"
builddir="$srcdir/libsixel-$_commit"

build() {
	abuild-meson -Db_lto=true . output
	meson compile -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

sha512sums="
74705ccb447bd098aba90b85436cf81bdab9479df703cc5d2b73f0efa6aa7308699dc61dd17ef47c0e7768e1f7510be0b188a5fa6da4d44ef1f98980cffee841  490ec15087e37d8e1395e4dbfb99fc543c5bae5d.tar.gz
"
