# Contributor: Leo <thinkabit.ukim@gmail.com>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=sndio
pkgver=1.7.0
pkgrel=1
pkgdesc="Small audio and MIDI framework part of the OpenBSD project"
url="http://www.sndio.org/"
arch="all"
license="ISC"
makedepends="alsa-lib-dev"
subpackages="$pkgname-dev $pkgname-doc $pkgname-libs $pkgname-openrc"
install="$pkgname.pre-install $pkgname.post-deinstall"
source="http://www.sndio.org/sndio-$pkgver.tar.gz
	sndiod.initd
	"

build() {
	./configure --prefix=/usr
	make
}

package() {
	make DESTDIR="$pkgdir" install
	mkdir -p "$pkgdir"/usr/sbin
	mv "$pkgdir"/usr/bin/sndiod "$pkgdir"/usr/sbin/
	install -D -m 644 contrib/default.sndiod \
		"$pkgdir"/etc/conf.d/sndiod
	install -m755 -D "$srcdir"/${pkgname}d.initd \
		"$pkgdir"/etc/init.d/${pkgname}d

}

sha512sums="f9db7bad5f30e8790488c4d20198c8a5a51f04f94e4b1067eadd7fe0fcc6f6ced3250173a627439d661dcf6faabc7bc4786b30af013788a5c88d972f1c9dc1f8  sndio-1.7.0.tar.gz
b9e08c032e0a44381b6582db57582c5efffbc6d343ada24e6e0c06d65e8739a9712fb40838d8cbca13788ac7a90927e8077d2e6f02e26b97623d3cfa1fbbd6be  sndiod.initd"
