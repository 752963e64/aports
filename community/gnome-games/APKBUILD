# Contributor: Rasmus Thomsen <oss@cogitri.dev>
# Maintainer: Rasmus Thomsen <oss@cogitri.dev>
pkgname=gnome-games
pkgver=3.37.90
pkgrel=0
pkgdesc="Browse and play your games"
url="https://wiki.gnome.org/Apps/Games"
arch="all !s390x !mips !mips64" # needs librsvg
license="GPL-3.0-or-later"
makedepends="meson gtk+3.0-dev vala grilo-dev libhandy1-dev librsvg-dev libmanette-dev
	libsoup-dev tracker-dev sqlite-dev libxml2-dev libarchive-dev retro-gtk-dev"
checkdepends="desktop-file-utils appstream-glib"
subpackages="$pkgname-lang"
source="https://download.gnome.org/sources/gnome-games/${pkgver%.*}/gnome-games-$pkgver.tar.xz
	tracker3.patch
	4c6f7a97d6f0ef63885e9c90f348a48a4be838be.patch"

build() {
	abuild-meson . output
	meson compile ${JOBS:+-j ${JOBS}} -C output
}

check() {
	meson test --no-rebuild -v -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

sha512sums="acb87ee6e2eea56fb7bee8714a6a6e88ea58c1e1966db3a2d0882a6a00c0f37312ccdc8ef13bfe2a09cead3f0bcb44bad08d34c1cfdb38c8940003ba2bf7629d  gnome-games-3.37.90.tar.xz
34c2de9d2c7e49a5e6430e86f6d11eb5c3e701e784f096fa970d32ea941d33c272fd1f1d71ae5d2a914e0278848e9dae7d07c2ab72ca60aa7b3a16716ee876d6  tracker3.patch
538ff21aac6a15b6d3924dce8d5bb021ef0f1caa37a1eb98eec8639a4da31df86da7771898eeb0b8bbf455696bf2cd6f950279754104f2e3c8cf08b20e0238f0  4c6f7a97d6f0ef63885e9c90f348a48a4be838be.patch"
