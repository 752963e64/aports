# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=jetty-runner
pkgver=9.4.44.20210927
_pkgver="${pkgver%.*}.v${pkgver##*.}"
pkgrel=1
pkgdesc="Fast and easy way to run Java web application from the command line."
url="https://www.eclipse.org/jetty"
# riscv64 blocked by java-jre-headless
arch="noarch !riscv64"
license="Apache-2.0"
depends="java-jre-headless"
subpackages="$pkgname-openrc"
source="https://repo.maven.apache.org/maven2/org/eclipse/jetty/jetty-runner/$_pkgver/jetty-runner-$_pkgver.jar
	$pkgname
	$pkgname.initd
	$pkgname.confd
	"

package() {
	cd "$srcdir"

	install -m644 -D "$pkgname-$_pkgver.jar" \
		"$pkgdir/usr/share/java/$pkgname.jar"
	install -m755 -D $pkgname "$pkgdir/usr/bin/$pkgname"

	install -m755 -D $pkgname.initd "$pkgdir/etc/init.d/$pkgname"
	install -m644 -D $pkgname.confd "$pkgdir/etc/conf.d/$pkgname"
}

sha512sums="
41a5197eedd16bd5c6d997fb10a13154a74766bf46009011e74dc78586dba6408384c04df4c1a02b8bf47dc16f116e511c56a63bd8176d2e74ff9da5eaa4be87  jetty-runner-9.4.44.v20210927.jar
aac40bdc4c6e48e6c70b8306a8bdcbb1b0f9d67a7ac6feac926b3207a8496f2d30a6db763e23a4f14e1276c19a96fa4e154e9ca767db1f3e17dde08a4ad28c26  jetty-runner
ba0f25bc2b5f2c3157c82fac3cded21bfb11fa07a4de6ee00ceabb2f8d08753213a12b2c85aa538c727ec55e68a2316e5cc57711cfb9570dea9590e1ad5598db  jetty-runner.initd
ff3d378c7d33fb386d04c1158ad0e8523e3870217554afc29f044e4bc9dae982f5b74e7732fc63dc6a303bef8e106a018ab3de5f7c8d77da924477a28cfe5277  jetty-runner.confd
"
