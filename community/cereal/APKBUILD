# Contributor: Adam Jensen <adam@acj.sh>
# Maintainer: Adam Jensen <adam@acj.sh>
pkgname=cereal
pkgver=1.3.1
pkgrel=0
pkgdesc="A header-only C++11 library for serialization"
url="https://github.com/USCiLab/cereal"
arch="noarch"
license="BSD-3-Clause"
makedepends="boost-dev cmake doxygen"
source="$pkgname-$pkgver.tar.gz::https://github.com/USCiLab/cereal/archive/v$pkgver.tar.gz"

build() {
	cmake -B build \
		-DCMAKE_INSTALL_PREFIX="/usr" \
		-DSKIP_PORTABILITY_TEST=ON \
		-DCMAKE_CXX_STANDARD=17
	make -C build
}

check() {
	cd build
	CTEST_OUTPUT_ON_FAILURE=TRUE ctest
}

package() {
	make -C build DESTDIR="$pkgdir" install
}

sha512sums="
5beafdd95b16344d5db43a0e26fd670a770e2c2a661ae117c9593db86697ca1034e2bf004fe6dc3c2a690e8a682f60d8b6121211d898009e59361ebef33f6fc9  cereal-1.3.1.tar.gz
"
