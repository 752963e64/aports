# Contributor: Rasmus Thomsen <oss@cogitri.dev>
# Maintainer: Rasmus Thomsen <oss@cogitri.dev>
pkgname=alpinelinux-appstream-data
pkgver=20200907
pkgrel=0
pkgdesc="Alpine Linux appstream data"
url="https://alpinelinux.org"
arch="x86_64 aarch64" # Only arches metadata is generated for
license="GPL-3.0-or-later"
options="!check" # Only XML data and icons - no tests
# Make sure to replace edge with the appropriate branch when upgrading branches
source="
	$pkgname-icons-main-64x64-$pkgver-edge.tar.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/main/icons-64x64.tar.gz
	$pkgname-icons-main-128x128-$pkgver-edge.tar.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/main/icons-128x128.tar.gz
	$pkgname-repo-main-x86_64-$pkgver-edge.xml.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/main/Components-x86_64.xml.gz
	$pkgname-repo-main-aarch64-$pkgver-edge.xml.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/main/Components-aarch64.xml.gz
	$pkgname-icons-community-64x64-$pkgver-edge.tar.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/community/icons-64x64.tar.gz
	$pkgname-icons-community-128x128-$pkgver-edge.tar.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/community/icons-128x128.tar.gz
	$pkgname-repo-community-x86_64-$pkgver-edge.xml.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/community/Components-x86_64.xml.gz
	$pkgname-repo-community-aarch64-$pkgver-edge.xml.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/community/Components-aarch64.xml.gz
	$pkgname-icons-testing-64x64-$pkgver-edge.tar.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/testing/icons-64x64.tar.gz
	$pkgname-icons-testing-128x128-$pkgver-edge.tar.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/testing/icons-128x128.tar.gz
	$pkgname-repo-testing-x86_64-$pkgver-edge.xml.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/testing/Components-x86_64.xml.gz
	$pkgname-repo-testing-aarch64-$pkgver-edge.xml.gz::https://appstream.alpinelinux.org/$pkgver/data/edge/testing/Components-aarch64.xml.gz
"
builddir="$srcdir/"

unpack() {
	:
}

package() {
	mkdir -p "$pkgdir"/usr/share/app-info/xmls

	for _repo in main community testing; do
		mkdir -p \
			"$pkgdir"/usr/share/app-info/icons/alpinelinux-edge-$_repo/64x64 \
			"$pkgdir"/usr/share/app-info/icons/alpinelinux-edge-$_repo/128x128

		tar xf "$srcdir"/$pkgname-icons-$_repo-64x64-$pkgver-edge.tar.gz -C "$pkgdir"/usr/share/app-info/icons/alpinelinux-edge-$_repo/64x64
		tar xf "$srcdir"/$pkgname-icons-$_repo-128x128-$pkgver-edge.tar.gz -C "$pkgdir"/usr/share/app-info/icons/alpinelinux-edge-$_repo/128x128
		cp "$srcdir"/$pkgname-repo-$_repo-$CARCH-$pkgver-edge.xml.gz "$pkgdir"/usr/share/app-info/xmls/$_repo.xml.gz
	done
}

sha512sums="61629fb06472b2fcf48af9965769834cb704b3f5897b63d9b55052512b8bf839066b2647b1923c14dd2ab07ac5de9270b167966ee4dd93a44f944a4f9d807a44  alpinelinux-appstream-data-icons-main-64x64-20200907-edge.tar.gz
61629fb06472b2fcf48af9965769834cb704b3f5897b63d9b55052512b8bf839066b2647b1923c14dd2ab07ac5de9270b167966ee4dd93a44f944a4f9d807a44  alpinelinux-appstream-data-icons-main-128x128-20200907-edge.tar.gz
3029b9acb7e556c63e486327a9667954ebd149926f3cb5f8cd0fbffad732074864e05e6a2ebc89d55dbb4c2dcb2069fe31fba7ce33587eabba065b92a19021d3  alpinelinux-appstream-data-repo-main-x86_64-20200907-edge.xml.gz
5dcfdab59532fee362cb7031a83c70d8116365ff49262957501a6306b357e6d0ed2c6d603f5b2cd8005e0eb592ad8ed1684c91563f032cc92556638f320e37a8  alpinelinux-appstream-data-repo-main-aarch64-20200907-edge.xml.gz
5af4cb95eb7aeee664dc337190607f93a87ebf6711171226396df414481d61150e131046ad4ab8ea6576fa35a69cce50e04bfe0429b198282cc99237bbb3a067  alpinelinux-appstream-data-icons-community-64x64-20200907-edge.tar.gz
2f37e4026ddc8fde81fc26480b6adad911f30737c8b70c0c916219ffdc0148b1f681ac42906b112601cbe24ea0dd49b860ceb52c9d744d79666a313434d599fd  alpinelinux-appstream-data-icons-community-128x128-20200907-edge.tar.gz
26a3566dc0782d89db6d0ee9539f0ee6a5645c88518d8bfd80002eecf749d38c00c0f3c551691bc3f8a25cd199036ac58ebf6bf158905b33ad8bbf105844ec18  alpinelinux-appstream-data-repo-community-x86_64-20200907-edge.xml.gz
04d493d5abac783ae38d4a3a4c0f5a9363f76188c4f500bbbe918a71fe277a34902fd86f9ed71ead5a6b656d15354be14e4eda9db2490f0d31a32b10b6431dad  alpinelinux-appstream-data-repo-community-aarch64-20200907-edge.xml.gz
61629fb06472b2fcf48af9965769834cb704b3f5897b63d9b55052512b8bf839066b2647b1923c14dd2ab07ac5de9270b167966ee4dd93a44f944a4f9d807a44  alpinelinux-appstream-data-icons-testing-64x64-20200907-edge.tar.gz
61629fb06472b2fcf48af9965769834cb704b3f5897b63d9b55052512b8bf839066b2647b1923c14dd2ab07ac5de9270b167966ee4dd93a44f944a4f9d807a44  alpinelinux-appstream-data-icons-testing-128x128-20200907-edge.tar.gz
87e0bee13356c7c901d5d5bcd8327496c99b077856928da25426ed2a9fcb2141ae1aebc728b01ee70c84f386c0af4fd1a7c726b6e8c4c1eb53d579854e8a8306  alpinelinux-appstream-data-repo-testing-x86_64-20200907-edge.xml.gz
48a9b18de3af6233822e6a03f47ca1d8d552f64367f692f9ac002753ead346604e084e101e1b594c090478d17dc4455da3541ca480bb9634a4e49f5f85d74a82  alpinelinux-appstream-data-repo-testing-aarch64-20200907-edge.xml.gz"
