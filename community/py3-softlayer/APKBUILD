# Contributor: Duncan Bellamy <dunk@denkimushi.com>
# Maintainer: Duncan Bellamy <dunk@denkimushi.com>
pkgname=py3-softlayer
pkgver=6.1.2
pkgrel=1
pkgdesc="library for SoftLayer's API"
url="https://github.com/softlayer/softlayer-python"
arch="noarch"
license="MIT"
depends="py3-click py3-prompt_toolkit py3-prettytable3 py3-pygments py3-requests py3-rich py3-urllib3"
makedepends="py3-setuptools"
checkdepends="py3-pytest py3-pytest-mock py3-testtools py3-softlayer-zeep python3-tkinter"
source="$pkgname-$pkgver.tar.gz::https://github.com/softlayer/softlayer-python/archive/v$pkgver.tar.gz
	py3.11.patch
	"
builddir="$srcdir/softlayer-python-$pkgver"

build() {
	python3 setup.py build
}

check() {
	python3 -m pytest
}

package() {
	python3 setup.py install --prefix=/usr --root="$pkgdir"

	rm -rf "$pkgdir"/usr/lib/python3*/site-packages/tests
}

sha512sums="
23b47c4a3c823521305daf329baefc7f201db4d2fd08eb4f83bc1b805f5d428379a74933fd47b22047c6b6d03fddc0a837b7b311ec07862975fb4976332e11da  py3-softlayer-6.1.2.tar.gz
e0e0a46f76e56a8e5b72f54594e554ccd1d2eb4b93cd14cb0cc714a17c7ce8a6a9de4540a9eb2bad81f7863d913e26249f8c15bc6f51b921fc29187828908498  py3.11.patch
"
