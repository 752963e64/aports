# Contributor: Alexey Yerin <yyp@disroot.org>
# Maintainer: Alexey Yerin <yyp@disroot.org>
pkgname=tut
pkgver=1.0.31
pkgrel=0
pkgdesc="TUI for Mastodon"
url="https://github.com/RasmusLindroth/tut"
arch="all"
license="MIT"
makedepends="go"
subpackages="$pkgname-doc"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/RasmusLindroth/tut/archive/refs/tags/$pkgver.tar.gz
"
options="net !check" # no tests

export GOFLAGS="$GOFLAGS -modcacherw -trimpath"
export GOCACHE="${GOCACHE:-"$srcdir/go-cache"}"
export GOTMPDIR="${GOTMPDIR:-"$srcdir"}"
export GOMODCACHE="${GOMODCACHE:-"$srcdir/go"}"

build() {
	go build -o tut
}

package() {
	install -D -m755 tut "$pkgdir"/usr/bin/tut

	install -D -m644 -t "$pkgdir"/usr/share/man/man1/ docs/man/tut.1
	install -D -m644 -t "$pkgdir"/usr/share/man/man5/ docs/man/tut.5
	install -D -m644 -t "$pkgdir"/usr/share/man/man7/ docs/man/tut.7
}

sha512sums="
3687a7524d63dbb8aae7a6bfe64802a914a330327bc64876bfaf52487e228bb3816a956153c16f6ea1e1afbeed47ddfdd26485d6c329af82defe98c08addf120  tut-1.0.31.tar.gz
"
