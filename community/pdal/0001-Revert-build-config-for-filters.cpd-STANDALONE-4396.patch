From c25248ecd7246c7d546dd77cce4c75527bb63216 Mon Sep 17 00:00:00 2001
From: Bart Ribbers <bribbers@disroot.org>
Date: Mon, 8 Jul 2024 15:05:48 +0200
Subject: [PATCH] Revert "build config for filters.cpd STANDALONE (#4396)"

This reverts commit 1a9cbe7dd853a42da19c1b4cdaf05ebf79c5b8b9.
---
 plugins/cpd/CMakeLists.txt | 12 ++++--------
 1 file changed, 4 insertions(+), 8 deletions(-)

diff --git a/plugins/cpd/CMakeLists.txt b/plugins/cpd/CMakeLists.txt
index ba85e27a7..50d0ea58b 100644
--- a/plugins/cpd/CMakeLists.txt
+++ b/plugins/cpd/CMakeLists.txt
@@ -2,14 +2,12 @@ cmake_minimum_required(VERSION 3.13)
 
 if (STANDALONE)
     project(pdal-cpd)
-    include("${CMAKE_CURRENT_LIST_DIR}/../../cmake/standalone.cmake" )
-    find_package(PDAL REQUIRED)
+    include(../../cmake/standalone.cmake NO_POLICY_SCOPE)
 endif(STANDALONE)
 
 set(Cpd_VERSION 0.5)
 
-find_package(Cpd ${Cpd_VERSION} REQUIRED CONFIG)
-find_package(Fgt REQUIRED CONFIG)
+find_package(Cpd ${Cpd_VERSION} REQUIRED)
 option(BUILD_PLUGIN_CPD "Build Coherent Point Drift support" ${Cpd_FOUND})
 
 set(files filters/CpdFilter.cpp)
@@ -20,10 +18,8 @@ PDAL_ADD_PLUGIN(filter_libname filter cpd
         filters/CpdFilter.cpp
     LINK_WITH
         Cpd::Library-C++
-        ${PDAL_LIBRARIES}
     INCLUDES
-        ${PDAL_VENDOR_DIR}/eigen
-        ${CMAKE_CURRENT_LIST_DIR}
+        "${include_dirs}"
     )
 
 if(${WITH_TESTS})
@@ -31,7 +27,7 @@ if(${WITH_TESTS})
         FILES
             test/CpdFilterTest.cpp
         LINK_WITH
-            Cpd::Library-C++
+            ${filter_libname}
         INCLUDES
             "${include_dirs}"
         )
-- 
2.45.2

