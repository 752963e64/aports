# Contributor: Galen Abell <galen@galenabell.com>
# Maintainer: Galen Abell <galen@galenabell.com>
pkgname=toot
pkgver=0.28.1
pkgrel=0
pkgdesc="mastodon cli & tui"
url="https://github.com/ihabunek/toot"
arch="noarch"
license="GPL-3.0-only"
depends="python3 py3-setuptools py3-requests py3-beautifulsoup4 py3-wcwidth py3-urwid"
makedepends="python3-dev"
checkdepends="py3-pytest"
source="https://files.pythonhosted.org/packages/source/t/toot/toot-$pkgver.tar.gz"

build() {
	python3 setup.py build
}

check() {
	# Skip timeline tests as they are broken in current version (fixed in main).
	pytest -v \
		--deselect tests/test_console.py::test_timeline \
		--deselect tests/test_console.py::test_timeline_with_re \
		--deselect tests/test_console.py::test_notifications
}

package() {
	python3 setup.py install --prefix=/usr --root="$pkgdir"
}

sha512sums="
15b9be73f7fd54c483cc1cb29bbaf2e00c0657a85c3171542d461bea39c9d746561ed8bb7e0f08e1a02c95d2f4073e92dd1aa0e520529484a87d7f5ad5c2f50a  toot-0.28.1.tar.gz
"
