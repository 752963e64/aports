# Contributor: Duncan Bellamy <dunk@denkimushi.com>
# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=snowball
pkgver=2.1.0
pkgrel=0
pkgdesc="Snowball rule-based stemming algorithms"
url="https://snowballstem.org/"
arch="all"
license="BSD-3-Clause"
makedepends="perl"
subpackages="$pkgname-libs $pkgname-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/snowballstem/snowball/archive/refs/tags/v$pkgver.tar.gz"

build() {
	make CC="gcc -fPIC"
}

check() {
	#check_utf8 check_iso_8859_1 check_iso_8859_2 check_koi8r
	#all have missing sub-targets
	make check_stemtest
}

package() {
	install -d "$pkgdir"/usr/bin "$pkgdir"/usr/include
	install snowball stemwords "$pkgdir"/usr/bin
	install include/libstemmer.h "$pkgdir"/usr/include
}

libs() {
	install -d "$subpkgdir"/usr/lib
	install "$builddir"/libstemmer.o "$subpkgdir"/usr/lib
}
sha512sums="
1efd7d8ab58852987e83247048244882c517e32237c8cb3c0558b66ecfb075733ce8805ebb76041e6e7d6664c236054effe66838e7c524ee529ce869aa8134f0  snowball-2.1.0.tar.gz
"
