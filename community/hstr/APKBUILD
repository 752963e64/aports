# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=hstr
pkgver=2.4
pkgrel=0
pkgdesc="Bash and ZSH shell history suggest box"
url="https://github.com/dvorka/hstr"
arch="all"
license="Apache-2.0"
makedepends="autoconf automake libtool ncurses-dev readline-dev"
options="!check"  # no *automated* tests to run
subpackages="
	$pkgname-doc
	$pkgname-bash-completion
	"
source="$pkgname-$pkgver.tar.gz::https://github.com/dvorka/hstr/archive/$pkgver/hstr-$pkgver.tar.gz"

prepare() {
	default_prepare

	sed -i "s|<ncursesw/curses.h>|<curses.h>|" \
		src/include/hstr_curses.h src/include/hstr.h

	cd build/tarball
	./tarball-automake.sh
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man
	make
}

package() {
	make install DESTDIR="$pkgdir"
}

sha512sums="
f2ac1fa957c54daec6172d28742df60fbc0f1cfc856794233423f2ece35f4116c962250fb74c5f27f212e9082bede4972e060d879a7c4ec85c0a0b18fca57832  hstr-2.4.tar.gz
"
