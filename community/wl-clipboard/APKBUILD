# Contributor: Robert Sacks <robert@sacks.email>
# Maintainer: Robert Sacks <robert@sacks.email>
pkgname=wl-clipboard
pkgver=2.0.0
pkgrel=4
pkgdesc="Command-line copy/paste utilities for Wayland"
url="https://github.com/bugaevc/wl-clipboard"
arch="all"
license="GPL-3.0-or-later"
options="!check" # No test suite
makedepends="
	meson
	ninja
	wayland-dev
	wayland-protocols
	"
subpackages="
	$pkgname-doc
	$pkgname-bash-completion
	$pkgname-zsh-completion
	"
source="https://github.com/bugaevc/wl-clipboard/archive/v$pkgver/wl-clipboard-$pkgver.tar.gz
	$pkgname-aa4633b-fix-hanging.patch::https://github.com/bugaevc/wl-clipboard/commit/aa4633b894c3c5ae6053026529ec9288566060a6.patch
	$pkgname-d2c32f2-ignore-sighup.patch::https://github.com/bugaevc/wl-clipboard/commit/d2c32f2b4d469f53070e8c4052dea6f412de3916.patch
	$pkgname-297ab2a-fix-crash.patch::https://github.com/bugaevc/wl-clipboard/commit/297ab2a6fdd34c15c5eb3eb427be8daf753bcfd7.patch
	"

build() {
	abuild-meson . build
	meson compile ${JOBS:+-j ${JOBS}} -C build
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C build
}

sha512sums="
a719b7197b0dec247ef50d800d8f10f3c377e41ff6d79ebfb4da50f2581d24a25ff987985e7a8f68842fdf8e706527d0b9ee3545c0044673110963b3ba8b55f1  wl-clipboard-2.0.0.tar.gz
edf5540d0c6e4b73a976a64a0801ba7368f0201ae1c3eb5a8a8e7b6c7f4bfe808adb3cba648c6e362132d8c609c7cd9e0f7c5cb0274e098794e120378a1f5300  wl-clipboard-aa4633b-fix-hanging.patch
6ef79279e8c45fe2e7816904bf912f04ea58c13d0dbc373811970eeb3a533f0258c40f130d0149ca54b4e8cda91d2bdfeea8368bd832ddf02d8cf9d0367f6e79  wl-clipboard-d2c32f2-ignore-sighup.patch
572ee1c51809ac079712e84c8eed395819de3ac24b0d5939e2ed0730aef13e25c878c7d9e993bae81e3310506c73ad0cef9b914276b893e99117bad7c0a0ca2b  wl-clipboard-297ab2a-fix-crash.patch
"
