# Contributor: Carlo Landmeter <clandmeter@alpinelinux.org>
# Maintainer: Galen Abell <galen@galenabell.com>
pkgname=riot-web
pkgver=1.10.1
pkgrel=0
pkgdesc="A glossy Matrix collaboration client for the web"
url="https://riot.im/"
arch="noarch"
options="!check"
license="Apache-2.0"
source="https://github.com/vector-im/element-web/releases/download/v$pkgver/element-v$pkgver.tar.gz"
builddir="$srcdir/element-v$pkgver"

# secfixes:
#   1.9.7-r0:
#     - CVE-2021-44538
#   1.8.4-r0:
#     - CVE-2021-40823
#     - CVE-2021-40824

build() {
	return 0
}

package() {
	mkdir -p "$pkgdir"/usr/share/webapps \
		"$pkgdir"/etc/riot-web
	cp -r "$builddir" "$pkgdir"/usr/share/webapps/riot-web
	mv "$pkgdir"/usr/share/webapps/riot-web/config.sample.json \
		"$pkgdir"/etc/riot-web
	ln -sf /etc/riot-web/config.json \
		"$pkgdir"/usr/share/webapps/riot-web/config.json
}

sha512sums="
92f0061821369fd3e130afadcf15e14f3f85e676c240378f091920a2f1a7229ccbe3c912de5cb35b4ae3cf6fb27ddece49787ab9440ebda10203fcb87f1b705f  element-v1.10.1.tar.gz
"
