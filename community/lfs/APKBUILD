# Contributor: Michał Polański <michal@polanski.me>
# Maintainer: Michał Polański <michal@polanski.me>
pkgname=lfs
pkgver=2.3.1
pkgrel=0
pkgdesc="Get information on your mounted disks"
url="https://github.com/Canop/lfs"
license="MIT"
arch="all !s390x !riscv64" # blocked by rust/cargo
makedepends="cargo"
source="https://github.com/Canop/lfs/archive/v$pkgver/lfs-$pkgver.tar.gz
	tests.patch
	"

build() {
	cargo build --release --locked
}

check() {
	cargo test --release --locked
}

package() {
	install -Dm755 target/release/lfs "$pkgdir"/usr/bin/lfs
}

sha512sums="
c7e2dd30e4393c182040e940230609731a2048663115b5b023f59e3c47d6c806cf90d62945cdbc3f26a59a86938ea8083c28f2f453bb4b20b8c764211d620a29  lfs-2.3.1.tar.gz
67865592c4cdd8499013d3591058eebf762574960c25df6ec4013882db21b1c42b76bf5a6a1cdd07072f42efdf8762aa6223f867a9bda975a2032742bfe41ecc  tests.patch
"
