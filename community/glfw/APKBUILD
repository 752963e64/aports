# Maintainer: Daniel Sabogal <dsabogalcc@gmail.com>
pkgname=glfw
pkgver=3.4.0_git20230331
pkgrel=0
_gitrev=3fa2360720eeba1964df3c0ecf4b5df8648a8e52
pkgdesc="Multi-platform library for OpenGL and Vulkan application development"
url="https://www.glfw.org/"
arch="all"
license="Zlib"
depends_dev="libxinerama-dev linux-headers mesa-dev"
makedepends="$depends_dev cmake samurai libx11-dev libxcursor-dev libxrandr-dev
	libxi-dev wayland-dev wayland-protocols libxkbcommon-dev"
subpackages="$pkgname-dev"
source="$pkgname-$_gitrev.tar.gz::https://github.com/glfw/glfw/archive/$_gitrev.tar.gz"
builddir="$srcdir/glfw-$_gitrev"

build() {
	cmake -G Ninja -B build \
		-DCMAKE_BUILD_TYPE=MinSizeRel \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DBUILD_SHARED_LIBS=ON \
		-DGLFW_BUILD_WAYLAND=ON
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
21401c38477110a0471deb240b9e459a858b168568ab9d9361f85ec4e5a10ed9417040cdfd185adce543b15870d275aaf1469ba9a351fc007339764b9907587b  glfw-3fa2360720eeba1964df3c0ecf4b5df8648a8e52.tar.gz
"
