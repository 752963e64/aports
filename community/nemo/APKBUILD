# Contributor: Clayton Craft <clayton@craftyguy.net>
# Maintainer: Clayton Craft <clayton@craftyguy.net>
pkgname=nemo
pkgver=4.8.0
pkgrel=0
pkgdesc="File manager for the Cinnamon desktop environment"
arch="all !s390x !mips !mips64 !ppc64le"  # exempi, libexif-dev not available for all archs
url="https://github.com/linuxmint/nemo"
license="GPL-2.0-only"
makedepends="
	exempi-dev
	xapp-dev
	cinnamon-desktop-dev
	dconf-dev
	gobject-introspection-dev
	gvfs-dev
	intltool
	libexif-dev
	libnotify-dev
	libxml2-dev
	meson
	python3"
checkdepends="xvfb-run"
source="
	https://github.com/linuxmint/nemo/archive/$pkgver/nemo-$pkgver.tar.gz
	933545507fa3ab15a90abe647f517000d2011022.patch
	"
subpackages="$pkgname-doc $pkgname-dev"
options="!check" # tests are broken: https://github.com/linuxmint/nemo/issues/2501

build() {
	abuild-meson . output
	meson compile ${JOBS:+-j ${JOBS}} -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

check() {
	xvfb-run meson test -C output
}
sha512sums="041c429314b575f26fb7daec7fc6829346f3b9482d3b29eda0c3517416a1e6b7a5de9da8dbf87c5884b52930c170695ceabf0495cf146c1b6b9709ad81a12575  nemo-4.8.0.tar.gz
a85f92b1633200f562970c1445484981b6583c0ce76a9fbb5ed38369f0bf3f06d53514d5ce9b2c45d1dced3b330ebe6062625ba7dd075a77e5b98909b12ae76d  933545507fa3ab15a90abe647f517000d2011022.patch"
