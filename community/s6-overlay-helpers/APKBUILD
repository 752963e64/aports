# Maintainer: Laurent Bercot <ska-devel@skarnet.org>
pkgname=s6-overlay-helpers
pkgver=0.0.1.0
pkgrel=0
pkgdesc="Binary helpers for s6-overlay"
url="https://github.com/just-containers/s6-overlay-helpers"
arch="all"
license="ISC"
makedepends="skalibs-dev>=2.11 execline-dev"
source="${pkgname}-${pkgver}.tar.gz::https://github.com/just-containers/s6-overlay-helpers/archive/refs/tags/v${pkgver}.tar.gz"

# s6-overlay-suexec is suid root.
# That's okay: it's only runnable as pid 1. (For use in USER containers.)
options="!check suid"

build() {
	./configure \
		--enable-shared \
		--enable-static \
		--disable-allstatic \
		--prefix=/usr \
		--libdir=/usr/lib \
		--libexecdir="/usr/lib/$pkgname" \
		--with-dynlib=/lib
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
f38fb3eae1d3c9baef09e7afce714526bd77c41015138358f6a9f19a06d1d0831dfa56815a5882dbec88cb17d1e98f8e98da88187cc7b501cdbaf221b8861cba  s6-overlay-helpers-0.0.1.0.tar.gz
"
