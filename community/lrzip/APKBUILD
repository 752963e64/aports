# Contributor: Roberto Oliveira <robertoguimaraes8@gmail.com>
# Maintainer: Roberto Oliveira <robertoguimaraes8@gmail.com>
pkgname=lrzip
pkgver=0.650
pkgrel=0
pkgdesc="compression utility that excels at compressing large files"
url="https://github.com/ckolivas/lrzip"
arch="all"
license="GPL-2.0"
depends="bash"
makedepends="autoconf automake libtool zlib-dev bzip2-dev lzo-dev lz4-dev"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/ckolivas/lrzip/archive/v$pkgver.tar.gz"

prepare() {
	default_prepare
	./autogen.sh
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr
	make
}

check() {
	make check
}

package() {
	make install DESTDIR="$pkgdir"

	# remove files related to library removed by upstream
	rm -r "$pkgdir"/usr/include \
		"$pkgdir"/usr/lib
}

sha512sums="
30a3217703748f6894fbac438976e3179a46e3f6af59e5849f7f8460d1a094275a4b41790617f4bd1ae7c7476548d2daadcfab9ab60c167ce5c24cd593e70964  lrzip-0.650.tar.gz
"
