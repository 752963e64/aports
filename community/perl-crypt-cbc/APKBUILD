# Automatically generated by apkbuild-cpan, template 1
# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=perl-crypt-cbc
_pkgreal=Crypt-CBC
pkgver=3.01
pkgrel=0
pkgdesc="Encrypt Data with Cipher Block Chaining Mode"
url="https://metacpan.org/release/Crypt-CBC/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends=""
cpanmakedepends=""
depends="$cpandepends perl-cryptx  perl-crypt-pbkdf2 
perl-crypt-rijndael perl-crypt-des perl-crypt-cast5 
 perl-crypt-openssl-aes perl-crypt-eksblowfish"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/L/LD/LDS/$_pkgreal-$pkgver.tar.gz"

builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	make
}

check() {
        cd "$builddir"
        make test
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

sha512sums="06ab0c51c80d890353505b12879def048eb996359a57886249a88196fd8d7c358800a901a3233d5ef58c7cf37bf42fed640efbf3bc7d1e367c39ee1456164b73  Crypt-CBC-3.01.tar.gz"
