# Automatically generated by apkbuild-cpan, template 1
# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=perl-crypt-cbc
_pkgreal=Crypt-CBC
pkgver=3.03
pkgrel=0
pkgdesc="Encrypt Data with Cipher Block Chaining Mode"
url="https://metacpan.org/release/Crypt-CBC/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends=""
cpanmakedepends=""
depends="$cpandepends perl-cryptx  perl-crypt-pbkdf2 
perl-crypt-rijndael perl-crypt-des perl-crypt-cast5 
 perl-crypt-openssl-aes perl-crypt-eksblowfish"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/L/LD/LDS/$_pkgreal-$pkgver.tar.gz"

builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	make
}

check() {
        cd "$builddir"
        make test
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

sha512sums="c1c55dd5fae83d45893f47319323f6d0ad8295ec480b8ab034beeb33bb7d16f26bbedaeef6613a3495849f5034e7502b01c88ab75dd4d69234151d3b674929e6  Crypt-CBC-3.03.tar.gz"
