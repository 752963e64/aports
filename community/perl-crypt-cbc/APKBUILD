# Automatically generated by apkbuild-cpan, template 1
# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=perl-crypt-cbc
_pkgreal=Crypt-CBC
pkgver=3.02
pkgrel=0
pkgdesc="Encrypt Data with Cipher Block Chaining Mode"
url="https://metacpan.org/release/Crypt-CBC/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends=""
cpanmakedepends=""
depends="$cpandepends perl-cryptx  perl-crypt-pbkdf2 
perl-crypt-rijndael perl-crypt-des perl-crypt-cast5 
 perl-crypt-openssl-aes perl-crypt-eksblowfish"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/L/LD/LDS/$_pkgreal-$pkgver.tar.gz"

builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	make
}

check() {
        cd "$builddir"
        make test
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

sha512sums="3e7e2eeefe0296130a6c1cdd17f1c7cc0cef86edc11c3a3e4ef2a74855877b5c9d9372c3cccbba908b27b7e955c803e5500b8631c3bb85c9cd8ac54f648e4b53  Crypt-CBC-3.02.tar.gz"
