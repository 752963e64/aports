# Contributor: Michał Polański <michal@polanski.me>
# Maintainer: Michał Polański <michal@polanski.me>
pkgname=lagrange
pkgver=1.12.0
pkgrel=0
pkgdesc="Beautiful Gemini client"
url="https://gmi.skyjake.fi/lagrange"
license="BSD-2-Clause"
arch="all"
makedepends="cmake zip fribidi-dev harfbuzz-dev libunistring-dev libwebp-dev
	mpg123-dev openssl1.1-compat-dev pcre-dev sdl2-dev zlib-dev"
subpackages="$pkgname-doc"
source="https://git.skyjake.fi/gemini/lagrange/releases/download/v$pkgver/lagrange-$pkgver.tar.gz"
options="!check" # no test suite

[ "$CARCH" = "riscv64" ] && options="$options textrels"


build() {
	cmake -B build \
		-DCMAKE_BUILD_TYPE=None \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DENABLE_POPUP_MENUS=OFF \
		-DENABLE_RESIZE_DRAW=OFF
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
0999bbc44742f18561d0bae90ef9d69b5baf4b0c37a703a7b713aa3922e7aaf808058250097a18ef84e8798c68236a91e9b5e4e6d0c6790990b1492afa1d73f2  lagrange-1.12.0.tar.gz
"
