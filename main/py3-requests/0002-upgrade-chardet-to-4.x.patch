From 516f84f490ccd352672847c6a3d23c67a13b3f98 Mon Sep 17 00:00:00 2001
From: Dan Blanchard <dan.blanchard@gmail.com>
Date: Thu, 10 Dec 2020 20:07:55 -0500
Subject: [PATCH] Upgrade to chardet 4.x

---
 requests/__init__.py | 6 ++----
 setup.py             | 2 +-
 2 files changed, 3 insertions(+), 5 deletions(-)

diff --git a/requests/__init__.py b/requests/__init__.py
index c00f556bbc..f8f94295f9 100644
--- a/requests/__init__.py
+++ b/requests/__init__.py
@@ -65,10 +65,8 @@ def check_compatibility(urllib3_version, chardet_version):
     # Check chardet for compatibility.
     major, minor, patch = chardet_version.split('.')[:3]
     major, minor, patch = int(major), int(minor), int(patch)
-    # chardet >= 3.0.2, < 3.1.0
-    assert major == 3
-    assert minor < 1
-    assert patch >= 2
+    # chardet >= 3.0.2, < 5.0.0
+    assert (3, 0, 2) <= (major, minor, patch) < (5, 0, 0)
 
 
 def _check_cryptography(cryptography_version):
diff --git a/setup.py b/setup.py
index e714bfa441..7ba4b2a25f 100755
--- a/setup.py
+++ b/setup.py
@@ -42,7 +42,7 @@ def run_tests(self):
 packages = ['requests']
 
 requires = [
-    'chardet>=3.0.2,<4',
+    'chardet>=3.0.2,<5',
     'idna>=2.5,<3',
     'urllib3>=1.21.1,<1.27',
     'certifi>=2017.4.17'
