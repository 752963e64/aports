# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=alpine-conf
pkgver=3.10.1
pkgrel=2
pkgdesc="Alpine configuration management scripts"
url="https://git.alpinelinux.org/alpine-conf/about"
arch="all"
license="MIT"
depends="openrc>=0.24.1-r6 busybox>=1.26.1-r3"
source="https://gitlab.alpinelinux.org/alpine/alpine-conf/-/archive/$pkgver/alpine-conf-$pkgver.tar.gz
	0001-setup-disk-dont-try-install-syslinux-on-unsupported-.patch
	0001-setup-alpine-fix-qemu-detection.patch
	"

builddir="$srcdir"/$pkgname-$pkgver
build() {
	cd "$builddir"
	make VERSION=$pkgver-r$pkgrel
}

package() {
	cd "$builddir"
	make install PREFIX= DESTDIR="$pkgdir"
	for i in commit exclude include status update; do
		ln -s lbu "$pkgdir"/sbin/lbu_$i
	done
}

sha512sums="37153680e6fadd15d5c98d1906be0a1969cf2236fca085f79ccae987ad73ececede6d9fd9840bcc8ad9436e43cbe1342e0f4c7c61ca2277b1f2cf20ed33b8888  alpine-conf-3.10.1.tar.gz
ad93c895f844738e46134b8867cd0c3fe9d84b61b72dc2e697567a47e7b92f9a15be2a9d5194a7351242e929b98958dc537430b42e030452445991b80dbeaf35  0001-setup-disk-dont-try-install-syslinux-on-unsupported-.patch
c5cb016e3b5dc13b851e5c514977ce7c1a7a4645f4d34aec6795696b7b0c3dc602df19ce57c6618c62a9a639d9077409d4a89b803f31f461105ea72ece617c6d  0001-setup-alpine-fix-qemu-detection.patch"
