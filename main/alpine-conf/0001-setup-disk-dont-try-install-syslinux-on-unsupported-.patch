From 4fb73a652e33ce85f38770ce341785ae1c0890cd Mon Sep 17 00:00:00 2001
From: Natanael Copa <ncopa@alpinelinux.org>
Date: Thu, 7 Jan 2021 16:18:22 +0100
Subject: [PATCH] setup-disk: dont try install syslinux on unsupported arches

syslinux only works on x86 and x86_64
---
 setup-disk.in | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/setup-disk.in b/setup-disk.in
index 2b75009..463010f 100644
--- a/setup-disk.in
+++ b/setup-disk.in
@@ -8,7 +8,6 @@ MBR=${MBR:-"/usr/share/syslinux/mbr.bin"}
 ROOTFS=${ROOTFS:-ext4}
 BOOTFS=${BOOTFS:-ext4}
 VARFS=${VARFS:-ext4}
-BOOTLOADER=${BOOTLOADER:-syslinux}
 DISKLABEL=${DISKLABEL:-dos}
 KERNELOPTS=${KERNELOPTS:-quiet}
 
@@ -17,6 +16,9 @@ SYSROOT=${SYSROOT:-/mnt}
 
 # machine arch
 ARCH=$(apk --print-arch)
+case "$ARCH" in
+	x86*) BOOTLOADER=${BOOTLOADER:-syslinux};;
+esac
 
 in_list() {
 	local i="$1"
-- 
2.30.0

