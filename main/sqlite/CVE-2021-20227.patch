diff -urN sqlite-autoconf-3320100.orig/sqlite3.c sqlite-autoconf-3320100/sqlite3.c
--- sqlite-autoconf-3320100.orig/sqlite3.c	2021-06-04 10:59:22.370699672 -0600
+++ sqlite-autoconf-3320100/sqlite3.c	2021-06-04 11:00:27.537728782 -0600
@@ -134387,7 +134387,9 @@
 static int havingToWhereExprCb(Walker *pWalker, Expr *pExpr){
   if( pExpr->op!=TK_AND ){
     Select *pS = pWalker->u.pSelect;
-    if( sqlite3ExprIsConstantOrGroupBy(pWalker->pParse, pExpr, pS->pGroupBy) ){
+    if( sqlite3ExprIsConstantOrGroupBy(pWalker->pParse, pExpr, pS->pGroupBy)
+     && ExprAlwaysFalse(pExpr)==0
+    ){
       sqlite3 *db = pWalker->pParse->db;
       Expr *pNew = sqlite3Expr(db, TK_INTEGER, "1");
       if( pNew ){
