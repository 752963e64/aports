# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=fping
pkgver=5.1
pkgrel=3
pkgdesc="A utility to ping multiple hosts at once"
url="https://fping.org/"
arch="all"
license="MIT"
makedepends="libcap-utils"
subpackages="$pkgname-doc"
source="https://fping.org/dist/fping-$pkgver.tar.gz
	int-conversion.patch
	"
options="!check" # no testsuite

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--mandir=/usr/share/man \
		--enable-ipv6
	make
}

package() {
	make install DESTDIR="$pkgdir"
	setcap cap_net_raw=+ep "$pkgdir"/usr/sbin/fping
}

sha512sums="
1a208da8dcd99093d0512af5d85ba5e7b5743ec97993d24c1fe612bb58d93090ac1ba0952f648aa075f16d390a77c4be65e394ae56dbede2a6914e0e8c68e2bd  fping-5.1.tar.gz
e1faeb355e64c4ea5adaf58a98f7fed9b1d7c4d331a132630d8a40219d4f43b7a50b966a3f93a9fe19dc39f153a0b3b8e8160c5b5888182bcf8a41079d517514  int-conversion.patch
"
