# Contributor: Roger Pau Monne <roger.pau@entel.upc.edu>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=xen
pkgver=4.13.2
pkgrel=4
pkgdesc="Xen hypervisor"
url="https://www.xenproject.org/"
arch="x86_64 armhf aarch64" # enable armv7 when builds with gcc8
license="GPL"
depends="bash iproute2 logrotate"
depends_dev="openssl-dev python2-dev e2fsprogs-dev gettext zlib-dev ncurses-dev
	dev86 texinfo perl pciutils-dev glib-dev yajl-dev libnl3-dev
	spice-dev gnutls-dev curl-dev libaio-dev lzo-dev xz-dev util-linux-dev
	linux-headers argp-standalone perl-dev flex bison"
makedepends="$depends_dev autoconf automake libtool dnsmasq"
options="!strip"

# secfixes:
#   4.7.0-r0:
#     - CVE-2016-6258 XSA-182
#     - CVE-2016-6259 XSA-183
#     - CVE-2016-5403 XSA-184
#   4.7.0-r1:
#     - CVE-2016-7092 XSA-185
#     - CVE-2016-7093 XSA-186
#     - CVE-2016-7094 XSA-187
#   4.7.0-r5:
#     - CVE-2016-7777 XSA-190
#   4.7.1-r1:
#     - CVE-2016-9386 XSA-191
#     - CVE-2016-9382 XSA-192
#     - CVE-2016-9385 XSA-193
#     - CVE-2016-9384 XSA-194
#     - CVE-2016-9383 XSA-195
#     - CVE-2016-9377 XSA-196
#     - CVE-2016-9378 XSA-196
#     - CVE-2016-9381 XSA-197
#     - CVE-2016-9379 XSA-198
#     - CVE-2016-9380 XSA-198
#   4.7.1-r3:
#     - CVE-2016-9932 XSA-200
#     - CVE-2016-9815 XSA-201
#     - CVE-2016-9816 XSA-201
#     - CVE-2016-9817 XSA-201
#     - CVE-2016-9818 XSA-201
#   4.7.1-r4:
#     - CVE-2016-10024 XSA-202
#     - CVE-2016-10025 XSA-203
#     - CVE-2016-10013 XSA-204
#   4.7.1-r5:
#     - XSA-207
#     - CVE-2017-2615 XSA-208
#     - CVE-2017-2620 XSA-209
#     - XSA-210
#   4.7.2-r0:
#     - CVE-2016-9603 XSA-211
#     - CVE-2017-7228 XSA-212
#   4.8.1-r2:
#     - CVE-2017-8903 XSA-213
#     - CVE-2017-8904 XSA-214
#   4.9.0-r0:
#     - CVE-2017-10911 XSA-216
#     - CVE-2017-10912 XSA-217
#     - CVE-2017-10913 XSA-218
#     - CVE-2017-10914 XSA-218
#     - CVE-2017-10915 XSA-219
#     - CVE-2017-10916 XSA-220
#     - CVE-2017-10917 XSA-221
#     - CVE-2017-10918 XSA-222
#     - CVE-2017-10919 XSA-223
#     - CVE-2017-10920 XSA-224
#     - CVE-2017-10921 XSA-224
#     - CVE-2017-10922 XSA-224
#     - CVE-2017-10923 XSA-225
#   4.9.0-r1:
#     - CVE-2017-12135 XSA-226
#     - CVE-2017-12137 XSA-227
#     - CVE-2017-12136 XSA-228
#     - CVE-2017-12855 XSA-230
#   4.9.0-r2:
#     - XSA-235
#   4.9.0-r4:
#     - CVE-2017-14316 XSA-231
#     - CVE-2017-14318 XSA-232
#     - CVE-2017-14317 XSA-233
#     - CVE-2017-14319 XSA-234
#   4.9.0-r5:
#     - XSA-245
#   4.9.0-r6:
#     - CVE-2017-15590 XSA-237
#     - XSA-238
#     - CVE-2017-15589 XSA-239
#     - CVE-2017-15595 XSA-240
#     - CVE-2017-15588 XSA-241
#     - CVE-2017-15593 XSA-242
#     - CVE-2017-15592 XSA-243
#     - CVE-2017-15594 XSA-244
#   4.9.0-r7:
#     - CVE-2017-15597 XSA-236
#   4.9.1-r1:
#     - XSA-246
#     - XSA-247
#   4.10.0-r1:
#     - XSA-248
#     - XSA-249
#     - XSA-250
#     - XSA-251
#     - XSA-253
#     - XSA-254
#   4.10.0-r2:
#     - CVE-2018-7540 XSA-252
#     - CVE-2018-7541 XSA-255
#     - CVE-2018-7542 XSA-256
#   4.10.1-r0:
#     - CVE-2018-10472 XSA-258
#     - CVE-2018-10471 XSA-259
#   4.10-1-r1:
#     - CVE-2018-8897 XSA-260
#     - CVE-2018-10982 XSA-261
#     - CVE-2018-10981 XSA-262
#   4.11.0-r0:
#     - CVE-2018-3639   XSA-263
#     - CVE-2018-128911 XSA-264
#     - CVE-2018-12893  XSA-265
#     - CVE-2018-12892  XSA-266
#     - CVE-2018-3665   XSA-267
#   4.11.1-r0:
#     - CVE-2018-15469  XSA-268
#     - CVE-2018-15468  XSA-269
#     - CVE-2018-15470  XSA-272
#     - CVE-2018-3620   XSA-273
#     - CVE-2018-3646   XSA-273
#     - CVE-2018-19961  XSA-275
#     - CVE-2018-19962  XSA-275
#     - CVE-2018-19963  XSA-276
#     - CVE-2018-19964  XSA-277
#     - CVE-2018-18883  XSA-278
#     - CVE-2018-19965  XSA-279
#     - CVE-2018-19966  XSA-280
#     - CVE-2018-19967  XSA-282
#   4.12.0-r2:
#     - CVE-2018-12126  XSA-297
#     - CVE-2018-12127  XSA-297
#     - CVE-2018-12130  XSA-297
#     - CVE-2019-11091  XSA-297
#   4.12.1-r0:
#     - CVE-2019-17349 CVE-2019-17350 XSA-295
#   4.13.0-r0:
#     - CVE-2019-18425 XSA-298
#     - CVE-2019-18421 XSA-299
#     - CVE-2019-18423 XSA-301
#     - CVE-2019-18424 XSA-302
#     - CVE-2019-18422 XSA-303
#     - CVE-2018-12207 XSA-304
#     - CVE-2019-11135 XSA-305
#     - CVE-2019-19579 XSA-306
#     - CVE-2019-19582 XSA-307
#     - CVE-2019-19583 XSA-308
#     - CVE-2019-19578 XSA-309
#     - CVE-2019-19580 XSA-310
#     - CVE-2019-19577 XSA-311
#   4.13.0-r1:
#     - CVE-2020-11740 CVE-2020-11741 XSA-313
#     - CVE-2020-11739 XSA-314
#     - CVE-2020-11743 XSA-316
#     - CVE-2020-11742 XSA-318
#   4.13.1-r0:
#     - CVE-????-????? XSA-312
#   4.13.1-r1:
#     - CVE-2020-0543  XSA-320
#   4.13.1-r2:
#     - CVE-2020-15566 XSA-317
#     - CVE-2020-15563 XSA-319
#     - CVE-2020-15565 XSA-321
#     - CVE-2020-15564 XSA-327
#     - CVE-2020-15567 XSA-328
#   4.13.1-r3:
#     - CVE-2020-14364 XSA-335
#   4.13.1-r4:
#     - CVE-2020-25602 XSA-333
#     - CVE-2020-25598 XSA-334
#     - CVE-2020-25604 XSA-336
#     - CVE-2020-25595 XSA-337
#     - CVE-2020-25597 XSA-338
#     - CVE-2020-25596 XSA-339
#     - CVE-2020-25603 XSA-340
#     - CVE-2020-25600 XSA-342
#     - CVE-2020-25599 XSA-343
#     - CVE-2020-25601 XSA-344
#   4.13.2-r0:
#     - CVE-2020-27674 XSA-286
#     - CVE-2020-27672 XSA-345
#     - CVE-2020-27671 XSA-346
#     - CVE-2020-27670 XSA-347
#   4.13.2-r1:
#     - CVE-2020-28368 XSA-351
#   4.13.2-r2:
#     - CVE-2020-29040 XSA-355
#   4.13.2-r3:
#     - CVE-2020-29480 XSA-115
#     - CVE-2020-29481 XSA-322
#     - CVE-2020-29482 XSA-323
#     - CVE-2020-29484 XSA-324
#     - CVE-2020-29483 XSA-325
#     - CVE-2020-29485 XSA-330
#     - CVE-2020-29566 XSA-348
#     - CVE-2020-29486 XSA-352
#     - CVE-2020-29479 XSA-353
#     - CVE-2020-29570 XSA-358
#     - CVE-2020-29571 XSA-359
#   4.13.2-r4:
#     - CVE-????-????? XSA-360

case "$CARCH" in
x86*)
	makedepends="$makedepends iasl seabios-bin"
	;;
arm*)
	makedepends="$makedepends dtc-dev"
	;;
aarch64)
	makedepends="$makedepends dtc-dev iasl"
	;;
esac

install=""

#if [ "$CARCH" != "armhf" ]; then
#	subpackages="$pkgname-dbg"
#fi
subpackages="$subpackages $pkgname-doc $pkgname-dev $pkgname-libs
	$pkgname-hypervisor $pkgname-bridge"

# grep _VERSION= stubdom/configure
_ZLIB_VERSION="1.2.3"
_LIBPCI_VERSION="2.2.9"
_NEWLIB_VERSION="1.16.0"
_LWIP_VERSION="1.3.0"
_GRUB_VERSION="0.97"
_OCAML_VERSION="4.02.0"
_GMP_VERSION="4.3.2"
_POLARSSL_VERSION="1.1.4"
_TPMEMU_VERSION="0.7.4"

# grep ^IPXE_GIT_TAG tools/firmware/etherboot/Makefile
_IPXE_GIT_TAG=1dd56dbd11082fb622c2ed21cfaced4f47d798a6

source="https://downloads.xenproject.org/release/$pkgname/$pkgver/$pkgname-$pkgver.tar.gz
	https://xenbits.xen.org/xen-extfiles/gmp-$_GMP_VERSION.tar.bz2
	https://xenbits.xen.org/xen-extfiles/grub-$_GRUB_VERSION.tar.gz
	https://xenbits.xen.org/xen-extfiles/lwip-$_LWIP_VERSION.tar.gz
	https://xenbits.xen.org/xen-extfiles/newlib-$_NEWLIB_VERSION.tar.gz
	https://xenbits.xen.org/xen-extfiles/pciutils-$_LIBPCI_VERSION.tar.bz2
	https://xenbits.xen.org/xen-extfiles/polarssl-$_POLARSSL_VERSION-gpl.tgz
	https://xenbits.xen.org/xen-extfiles/tpm_emulator-$_TPMEMU_VERSION.tar.gz
	https://xenbits.xen.org/xen-extfiles/zlib-$_ZLIB_VERSION.tar.gz
	https://xenbits.xen.org/xen-extfiles/ipxe-git-$_IPXE_GIT_TAG.tar.gz

	mini-os-__divmoddi4.patch
	qemu-xen_paths.patch

	hotplug-vif-vtrill.patch

	musl-hvmloader-fix-stdint.patch
	stdint_local.h
	elf_local.h

	xen-hotplug-lockfd.patch
	xen-fd-is-file.c

	xenqemu-xattr-size-max.patch

	hotplug-Linux-iscsi-block-handle-lun-1.patch

	xsa351-x86-4.13-1.patch
	xsa351-x86-4.13-2.patch
	xsa355.patch

	0001-tools-xenstore-allow-removing-child-of-a-node-exceed.patch
	0002-tools-xenstore-ignore-transaction-id-for-un-watch.patch
	0003-tools-xenstore-fix-node-accounting-after-failed-node.patch
	0004-tools-xenstore-simplify-and-rename-check_event_node.patch
	0005-tools-xenstore-check-privilege-for-XS_IS_DOMAIN_INTR.patch
	0006-tools-xenstore-rework-node-removal.patch
	0007-tools-xenstore-fire-watches-only-when-removing-a-spe.patch
	0008-tools-xenstore-introduce-node_perms-structure.patch
	0009-tools-xenstore-allow-special-watches-for-privileged-.patch
	0010-tools-xenstore-avoid-watch-events-for-nodes-without-.patch
	0001-tools-ocaml-xenstored-ignore-transaction-id-for-un-w.patch
	0002-tools-ocaml-xenstored-check-privilege-for-XS_IS_DOMA.patch
	0003-tools-ocaml-xenstored-unify-watch-firing.patch
	0004-tools-ocaml-xenstored-introduce-permissions-for-spec.patch
	0005-tools-ocaml-xenstored-avoid-watch-events-for-nodes-w.patch
	0006-tools-ocaml-xenstored-add-xenstored.conf-flag-to-tur.patch

	xsa322-o.patch
	xsa322-4.14-c.patch

	xsa323.patch

	xsa324.patch

	xsa325-4.14.patch

	xsa330.patch

	xsa348-4.13-1.patch
	xsa348-4.13-2.patch
	xsa348-4.13-3.patch

	xsa352.patch

	xsa353.patch

	xsa358-4.14.patch

	xsa359.patch

	xsa360-4.14.patch

	xenstored.initd
	xenstored.confd
	xenconsoled.initd
	xenconsoled.confd
	xendomains.initd
	xendomains.confd
	xen-consoles.logrotate
	xenqemu.confd
	xenqemu.initd
	xendriverdomain.initd
	xen-pci.initd
	xen-pci.confd
	"

builddir="$srcdir"/$pkgname-$pkgver
_seabios=/usr/share/seabios/bios-256k.bin

# Override wrong arch detection from xen-$pkgver/Config.mk.
case "$CARCH" in
armhf) export XEN_TARGET_ARCH="arm32";;
aarch64) export XEN_TARGET_ARCH="arm64";;
esac

prepare() {
	local i _failed= _series=
	cd "$builddir"

	for i in $source; do
		case $i in
		*-etherboot-*)
			p=${i%%::*}
			p=${p##*/}
			msg "adding to ipxe: $p"
			cp "$srcdir"/$p tools/firmware/etherboot/patches/
			echo "$p" >> tools/firmware/etherboot/patches/series
			;;
		*.patch) msg $i; patch -s -N -p1 -i "$srcdir"/$i \
				|| _failed="$_failed $i"
			;;
		*/ipxe-git-*)
			ln -s "$srcdir"/${i##*/} \
				tools/firmware/etherboot/ipxe.tar.gz || return 1
			;;
		*/xen-extfiles/*)
			ln -s "$srcdir"/${i##*/} stubdom/ || return 1
			;;
		esac
	done
	if [ -n "$_failed" ]; then
		error "Patches failed:"
		for i in $_failed; do
			echo $i
		done
		return 1
	fi

	# install our stdint_local.h and elf_local.h
	install "$srcdir"/stdint_local.h "$srcdir"/elf_local.h \
		"$builddir"/tools/firmware/ || return 1
	ln -s ../firmware/stdint_local.h "$builddir"/tools/libxl/

	# remove all -Werror
	msg "Eradicating -Werror..."
	find . -name '*.mk' -o -name 'Make*' | xargs sed -i -e 's/-Werror//g' \
		|| return 1

	msg "Updating config.sub..."
	update_config_sub || return 1

	msg "Autoreconf..."
	autoreconf || return 1

	unset CFLAGS
	unset LDFLAGS
}

# Unset CFLAGS and LDFLAGS because the xen build system
# doesn't support them. Instead use .config in xen root
# folder if necessary.
munge_cflags() {
	msg "Munging CFLAGS..."

	unset CFLAGS
	unset LDFLAGS
	unset LANG
	unset LC_ALL

	case "$CARCH" in
	armhf) export CFLAGS="-mcpu=cortex-a15";;
	aarch64) export CFLAGS="-mcpu=cortex-a53";;
	esac
}

# These tasks are added as separate tasks to enable a packager
# to invoke specific tasks like building the hypervisor.  i.e.
#    $ abuild configure build_tools
configure() {
	cd "$builddir"

	msg "Running configure..."
	./configure --prefix=/usr \
		--build=$CBUILD \
		--host=$CHOST \
		--with-system-seabios=$_seabios \
		|| return 1
}

build_hypervisor() {
	munge_cflags

	msg "Building hypervisor..."
	make xen || return 1
}

build_tools() {
	munge_cflags

	msg "Building tools..."
	make tools || return 1
}

build_docs() {
	munge_cflags

	msg "Building documentation..."
	make docs
}

build_stubdom() {
	munge_cflags

	msg "Building stub domains..."
	make stubdom || return 1
}

build() {
	cd "$builddir"
	configure || return 1
	build_hypervisor || return 1
	build_tools || return 1
	build_docs || return 1
	case "$CARCH" in
	x86*) build_stubdom || return 1;;
	esac

	${CC:-gcc} -o xen-fd-is-file "$srcdir"/xen-fd-is-file.c
}

package() {
	cd "$builddir"

	unset CFLAGS
	unset LDFLAGS

	make -j1 DESTDIR="$pkgdir" install-xen install-tools install-docs \
		|| return 1
	case "$CARCH" in
	x86*) make -j1 DESTDIR="$pkgdir" install-stubdom || return 1;;
	esac

	# remove default xencommons
	rm -rf "$pkgdir"/etc/init.d/xencommons
	# remove default xendriverdomain
	rm -rf "$pkgdir"/etc/init.d/xendriverdomain

	for i in $source; do
		case $i in
		*.initd) install -Dm755 "$srcdir"/$i \
				"$pkgdir"/etc/init.d/${i%.*};;
		*.confd) install -Dm644 "$srcdir"/$i \
				"$pkgdir"/etc/conf.d/${i%.*};;
		esac
	done
	install -Dm644 "$srcdir"/xen-consoles.logrotate \
		"$pkgdir"/etc/xen/xen-consoles.logrotate

	install -m755 xen-fd-is-file "$pkgdir"/usr/lib/xen/bin/xen-fd-is-file

	# we need to exclude /usr/share when stripping
        msg "Stripping binaries"
	scanelf --recursive --nobanner --etype "ET_DYN,ET_EXEC" "$pkgdir"/usr/lib \
		"$pkgdir"/usr/bin \
		"$pkgdir"/usr/sbin \
                | sed -e 's:^ET_DYN ::' -e 's:^ET_EXEC ::' \
                | xargs strip
}

check() {
	cd "$builddir"
	make test
}

libs() {
	pkgdesc="Libraries for Xen tools"
	replaces="xen"
	depends=
	mkdir -p "$subpkgdir"/usr/lib
	mv "$pkgdir"/usr/lib/*.so.* \
		"$pkgdir"/usr/lib/xenfsimage \
		"$subpkgdir"/usr/lib/
}

hypervisor() {
	pkgdesc="Xen hypervisor"
	depends=
	mkdir -p "$subpkgdir"
	mv "$pkgdir"/boot "$subpkgdir"/
}

bridge() {
	depends="dnsmasq"
	pkgdesc="Bridge interface for XEN with dhcp"
	mkdir -p "$subpkgdir"/etc/conf.d \
		"$subpkgdir"/etc/init.d \
		"$subpkgdir"/etc/xen

	ln -s dnsmasq "$subpkgdir"/etc/init.d/dnsmasq.xenbr0
	cat ->>"$subpkgdir"/etc/conf.d/dnsmasq.xenbr0 <<EOF
		BRIDGE_ADDR="10.0.4.1"
		BRIDGE_NETMASK="255.255.255.0"
		BRIDGE_NETWORK="10.0.4.0/24"
		BRIDGE_DHCP_RANGE="10.0.4.2,10.0.4.254"
		BRIDGE_DHCP_MAX="253"
		BRIDGE_MAC="00:16:3f:00:00:00"
		DNSMASQ_CONFFILE="/etc/xen/dnsmasq.conf"
EOF
	cat ->>"$subpkgdir"/etc/xen/dnsmasq.conf <<EOF
		#dhcp-host=somehost,10.0.4.3
		#dhcp-host=otherhost,10.0.4.4
EOF

}

sha512sums="cd3092281c97e9421e303aa288aac04dcccd5536ba7c0ff4d51fbf3d07b5ffacfe3456ba06f5cf63577dafbf8cf3a5d9825ceb5e9ef8ca1427900cc3e57b50a3  xen-4.13.2.tar.gz
2e0b0fd23e6f10742a5517981e5171c6e88b0a93c83da701b296f5c0861d72c19782daab589a7eac3f9032152a0fc7eff7f5362db8fccc4859564a9aa82329cf  gmp-4.3.2.tar.bz2
c2bc9ffc8583aeae71cee9ddcc4418969768d4e3764d47307da54f93981c0109fb07d84b061b3a3628bd00ba4d14a54742bc04848110eb3ae8ca25dbfbaabadb  grub-0.97.tar.gz
1465b58279af1647f909450e394fe002ca165f0ff4a0254bfa9fe0e64316f50facdde2729d79a4e632565b4500cf4d6c74192ac0dd3bc9fe09129bbd67ba089d  lwip-1.3.0.tar.gz
40eb96bbc6736a16b6399e0cdb73e853d0d90b685c967e77899183446664d64570277a633fdafdefc351b46ce210a99115769a1d9f47ac749d7e82837d4d1ac3  newlib-1.16.0.tar.gz
2b3d98d027e46d8c08037366dde6f0781ca03c610ef2b380984639e4ef39899ed8d8b8e4cd9c9dc54df101279b95879bd66bfd4d04ad07fef41e847ea7ae32b5  pciutils-2.2.9.tar.bz2
88da614e4d3f4409c4fd3bb3e44c7587ba051e3fed4e33d526069a67e8180212e1ea22da984656f50e290049f60ddca65383e5983c0f8884f648d71f698303ad  polarssl-1.1.4-gpl.tgz
4928b5b82f57645be9408362706ff2c4d9baa635b21b0d41b1c82930e8c60a759b1ea4fa74d7e6c7cae1b7692d006aa5cb72df0c3b88bf049779aa2b566f9d35  tpm_emulator-0.7.4.tar.gz
021b958fcd0d346c4ba761bcf0cc40f3522de6186cf5a0a6ea34a70504ce9622b1c2626fce40675bc8282cf5f5ade18473656abc38050f72f5d6480507a2106e  zlib-1.2.3.tar.gz
8120696ba6d79fd9189664deed9b0489825d8d1edf7b931023b3979b7b9f82248e5b808c4517036cd40a85442ddf51a8dcad3b05d7f3c3cc6650654d53da4050  ipxe-git-1dd56dbd11082fb622c2ed21cfaced4f47d798a6.tar.gz
b9c754220187955d01ffbb6e030dace9d9aaae755db1765d07e407858c71a2cb0de04e0ab2099cd121d9e1bc1978af06c7dbd2fd805e06eca12ac5d527f15a52  mini-os-__divmoddi4.patch
1936ab39a1867957fa640eb81c4070214ca4856a2743ba7e49c0cd017917071a9680d015f002c57fa7b9600dbadd29dcea5887f50e6c133305df2669a7a933f3  qemu-xen_paths.patch
f095ea373f36381491ad36f0662fb4f53665031973721256b23166e596318581da7cbb0146d0beb2446729adfdb321e01468e377793f6563a67d68b8b0f7ffe3  hotplug-vif-vtrill.patch
5fc028b5e4eb9b14fd5b27e3470172e3eb1ac63c1443fc0af7ed04efd874db733165e62d41504a547651c4466737303a6a5128f66212a42664ff6c1c9d233f4a  musl-hvmloader-fix-stdint.patch
8c3b57eab8641bcee3dbdc1937ea7874f77b9722a5a0aa3ddb8dff8cc0ced7e19703ef5d998621b3809bea7c16f3346cfa47610ec9ab014ad0de12651c94e5ff  stdint_local.h
853467a2d055c5bfbdc7bdca175a334241be44a7c5ac3c0a84a4bc5463b5c070b66d37e2a557429ef860727a6b7350683af758cc2494d85b6be4d883143a2c0d  elf_local.h
79cb1b6b81b17cb87a064dfe3548949dfb80f64f203cac11ef327102b7a25794549ce2d9c019ebf05f752214da8e05065e9219d069e679c0ae5bee3d090c685e  xen-hotplug-lockfd.patch
e76816c6ad0e91dc5f81947f266da3429b20e6d976c3e8c41202c6179532eec878a3f0913921ef3ac853c5dbad8082da3c9cd53b65081910516feb492577b7fc  xen-fd-is-file.c
2094ea964fa610b2bf72fd2c7ede7e954899a75c0f5b08030cf1d74460fb759ade84866176e32f8fe29c921dfdc6dafd2b31e23ab9b0a3874d3dceeabdd1913b  xenqemu-xattr-size-max.patch
8c9cfc6afca325df1d8026e21ed03fa8cd2c7e1a21a56cc1968301c5ab634bfe849951899e75d328951d7a41273d1e49a2448edbadec0029ed410c43c0549812  hotplug-Linux-iscsi-block-handle-lun-1.patch
fdea3f42de6024c4b28ed32e26aa8c03efd198e487e532081f6c0c229fb309a1e5a02d7ba4a66626470d0debbc8abc96cbf27f1aed24b71f95c085db7077c736  xsa351-x86-4.13-1.patch
7b3f4b3e586b39c2c037ccdd7c9edc9c47d89bfc4c4135ba7f9ac016e6911562ee634c13760d1af50835cb9fd1776ef3d1624ca4768f2fdd7266b38b67911374  xsa351-x86-4.13-2.patch
70b4b03c956b189ed75d0105152945bf3bfbee406135cab32f7b8160739f207ae17f9e7028b13d298de97de6dadcb205e8a7cd2830cad8b91e8a62b93f168a80  xsa355.patch
237c2253538868b7712dca45a54f2fbecb789e07a25c36d881c8d98863aaef2e95d098c1853318a9cd8b900c5d2513d18dafa5e5267865a9c755d7512d06b65d  0001-tools-xenstore-allow-removing-child-of-a-node-exceed.patch
a923713c63735194076c914104c30370b56fd8525572a3c423abe7b40c25b2d3ccc55c3866167314f15f3aa9a6536117b2be63cdd465cb19f84e0cd9e7500101  0002-tools-xenstore-ignore-transaction-id-for-un-watch.patch
65d75f24ccf77a9d64f2939ad88ebfabb19038491c50f7165b7a2b726572dc87bb40a4d03cf64b45c47634f86529c77e3a0f7776d701e47406b944d922bcc807  0003-tools-xenstore-fix-node-accounting-after-failed-node.patch
51139bc5083a5ca16e0cce72bf3543617ab6d67a49c9d8dbf958df870b26affdaca2f605cc91f86d4d110a1691fdfbf13fdcb75588730e9f6341ac091627a11c  0004-tools-xenstore-simplify-and-rename-check_event_node.patch
65b3e352136b9df7f1eb405e86c0d470ea1982481fbe3c1c34d295f8f135062d116f1df809de6217458ef26b2e163f12bd599716c8b103162aa6d6695758bbe3  0005-tools-xenstore-check-privilege-for-XS_IS_DOMAIN_INTR.patch
1f51d7e4851fda2348ae3fdf827a25b2a9c2e8f2a1c68812bc1062fab9e71fa7199b39e267e1e9965c943111703cdee5097f9594921f089734f4bea513a323ad  0006-tools-xenstore-rework-node-removal.patch
967873f5ffa6ec8f525c7e33d52eb7617f6d3ba5c6bd36cf3129aad13dafccc761e1793773486caa89104d6c0ed5f19fb708dfc2e2cd2324a62c4a424cc08cb7  0007-tools-xenstore-fire-watches-only-when-removing-a-spe.patch
f8d80c40a5bff61a96fb2be15cde28ca800c8d24eee719c242f09447ecc9c7df5b59c42904dd51bc7c89baf6d68905febcdef7a5ee5dd97817624a7733d18f0c  0008-tools-xenstore-introduce-node_perms-structure.patch
df0817488ebcceacc33ab08876214cc7622406ca54b0d77b69113e7a9da66dd7e01f57606ea30c0d0425c66f314615298c187d37530e1995de64f625138ffd1f  0009-tools-xenstore-allow-special-watches-for-privileged-.patch
34c7a5776fb8f49365486a3a65c6e268450d6ae01d36f3cab25e575bde0f72cfb4c5b8f2b174bf4c1564b209b87973923c0cdb8c02b7d7470dd4805fbaea68c2  0010-tools-xenstore-avoid-watch-events-for-nodes-without-.patch
dc71ca60b7ae47eeddd1396cfb9321801ae9bb4602493fd07fedbc9bb2dfc7a71d52b32374cbc4b6f7a7cfb75e24cdcc0b6ba593d567b7fbb1d7cc305deee3e0  0001-tools-ocaml-xenstored-ignore-transaction-id-for-un-w.patch
7139c51d42777575ad165f908831470cf1798c8a9d15d170de4596c450258690d1e2e50d1dee9404afd59402604817542fd0d585d6ff5fa7fbcd45185c2c1b8f  0002-tools-ocaml-xenstored-check-privilege-for-XS_IS_DOMA.patch
6e92d0e57ee720c4b70d0fe184886ecaa50e57e5baec4830fa4b4d8702fcd1cf6749c3cb0423a4412a945a2f19bcca249c823f93dd551cc5d4821d559752fc7a  0003-tools-ocaml-xenstored-unify-watch-firing.patch
d0ec105a6538bbe6b11ffcbe0620e20f8bfbf4bd14be4f3167d58a7b81e5db7b4be978ba7ec38091a9336c9bed37559814fd3bad809b5bbf24a141021be483a2  0004-tools-ocaml-xenstored-introduce-permissions-for-spec.patch
86d3a816636cd868fee564d8e86998dfe0b74ec0f7c58ce7d8fb039ecc8e0a975f84a7f9848d32a4b84b694e8d9c6e86ba9b0b16c98bda8f295382a46140cd2f  0005-tools-ocaml-xenstored-avoid-watch-events-for-nodes-w.patch
9e33839d05cff1bcdd70d5af60c6c46909b60eae34294e42c47a54f8829e05772e9cac62246545dcc00ff153c0bf0d41e180b268d55ddd01be9218297737a47b  0006-tools-ocaml-xenstored-add-xenstored.conf-flag-to-tur.patch
7dfef0e914dd69796d0f51ab62501fc1f554d3c8c13c4fa3b4647fecda1c73c074a7a25d0685293c92d085ce42f466cdc438b37a07d9c704026c0554a5dac9e6  xsa322-o.patch
301729f80fd4ea60f2d55a0da3122d97aad11e8fd49e4526e2ddcc37a61fe958a4054c3e6ca3442511f7f1ce33300d1e1b5f53272deb126832de03011c5f57a3  xsa322-4.14-c.patch
a8fd66720a73f8c5af413a47188bc73481ead8c9fcdf2d51accdaa5cbaeb211480d990fa93f0e8376a237031683bd050963a44ccb5737a73bb2a804be489a9a9  xsa323.patch
7cbb488c29d3772d01a40d261c9a1cee6363d99f0182b904153a4ab7a0cb369f8e2d20788acedc45852bbdd8882a74e54f4565775bfe8cae4cb58558823c1d0d  xsa324.patch
a757a3ca6673f7604f2f836073604c677668e4871651f6702bbc6506336c0684202b1f985ee9c2577784c1a8c57c663799036938ea8eab2de35a72ed111f3d0f  xsa325-4.14.patch
621003035fb227c93cec700d536f5d1c2383f77b9cf0d6947a9d6cec65b08729b99dcc1bd36860ad27a8afc0d54a76b0e76588187676a76029ff052eb845ae34  xsa330.patch
d73b8a7e815601770804029175c068a4331346aa3c137a71cc105684cdded2d13b40a99f67ada614c99290bb709c779302992b37b90a7d79bb1bb79edbc8042d  xsa348-4.13-1.patch
3ac4b6be70658aad2d9dfd156be92476a81954539aad230b230a360fccc78af596193e4dee4844ac751dacf108d5b3fee82636854a3e608f4c8bbdcf9b3882dc  xsa348-4.13-2.patch
b1791c36e0eb0ae6bb89c0529922775e6b9c0ec66cfd99a203bc56ff0ddb071e98ae39e81d4f4d5703149a6e066c0f0dd00283b2cae586429b1fc4d548993d6d  xsa348-4.13-3.patch
3fe751d9c802963ec57ffc88a69a08de63f0c45da914b9debc65fd77d5cb407080e7a6e3287a893ccf5c352a2d2786f831458cd302b99d1b3d490e9a7330fbad  xsa352.patch
c458c962d9ae45c2fce049e6094923f72dfc87e0a20ef083371215cfe8345f437f556c4efadac841432db8421457eb0a6dea5d93ff148aff2466795125c759e1  xsa353.patch
0f7dcfa0115ac7e353bb0f645845b839fd628bdb553f8a5c5f03f2b5808515e255bcc6173b6b946a8901f62a80dcf9cf94f4039cd66e04315bd2ba849e585fde  xsa358-4.14.patch
a842b086044a2936b71f77afb6a30aa8eb336dda467d94ab2656936434f7a1301522f2c2d6a90ebb87d39aca16d3b9d875d36b0b14492420aca1782116ecc398  xsa359.patch
f39ae56876f61ed224073985dda83037e75e6f2ab0cd0b0f920186812c6d1e6ec52494b3fd0f25cd9d6606d85061a6555cb952719d084cf8e256ef93080b75f9  xsa360-4.14.patch
52c43beb2596d645934d0f909f2d21f7587b6898ed5e5e7046799a8ed6d58f7a09c5809e1634fa26152f3fd4f3e7cfa07da7076f01b4a20cc8f5df8b9cb77e50  xenstored.initd
093f7fbd43faf0a16a226486a0776bade5dc1681d281c5946a3191c32d74f9699c6bf5d0ab8de9d1195a2461165d1660788e92a3156c9b3c7054d7b2d52d7ff0  xenstored.confd
3c86ed48fbee0af4051c65c4a3893f131fa66e47bf083caf20c9b6aa4b63fdead8832f84a58d0e27964bc49ec8397251b34e5be5c212c139f556916dc8da9523  xenconsoled.initd
30df69cc38d0bed26bc4d6e08a2b62cbdc654d5f663009a05cb3b83b3e3dc5e206362d3fd59abbb753ceb8d6d79eaa6e15d079bb8f4f35dc74667103faf4e85d  xenconsoled.confd
357ab672be7ac36e4b5b056504cd5094d9218c4ea148c2f739d628479ebf0d9c0eb201ea7d4f97f07d01e59b88cafd318de0e1250a5b3db41bd94aa3fb7c7e49  xendomains.initd
c7c0eecd5f454d903b57a710902da27dcb2c6b200f88d4eadfab33a447be6b41454109d482aab849a690446ea5c928e619dfc6cf95b7955f00a476f2317bb82b  xendomains.confd
ab2105c75cfe01768aecd5bcbb56269d63666e8a44e42b6a83aee87df6c84ee2f9ab249171c21b2e09f8fec2cae8318f6e87d160989398a3e7dd68db8d52c426  xen-consoles.logrotate
bdbe15c924071cdc2d0f23e53ba8e3f837d4b5369bfb218abd3405f9bef25d105269aaf0784baeb69c073a5786b8c82ffdfd414e86874da34293cfdc2c497928  xenqemu.confd
8475119369409efb8ad930c7735cd3d782191d18fab4fc322a51120c395162ff88e381182876036d1078afd30079dbf3f94a3568689e9b52ba235adead4b97d3  xenqemu.initd
85afec835a374aac3d307b3226eee7a08a676b1daac7e39bb7463d564ef72438dc27dd188a871cfd031e80c6992b756951f26bdca0d445e07eab6dba5245de46  xendriverdomain.initd
a46337bebce24337f00adbe08095b9f5128c1f440e2033329e5ace9fd817a31fb772d75c0ecc7cc06f34b1522ebf8b21874ee4d0881a0f29851b1c1235f29cf3  xen-pci.initd
2db5fa6edeeb028236460029b976a849f22b3a15d3929acc3911dc41f365b471c2b815eb111639bc230a69528b1571f3c2e9e8e1e81a6679e55387e39355aa99  xen-pci.confd"
