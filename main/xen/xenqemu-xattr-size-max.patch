--- a/tools/qemu-xen/hw/9pfs/9p.c
+++ b/tools/qemu-xen/hw/9pfs/9p.c
@@ -30,6 +30,10 @@
 #include <math.h>
 #include <linux/limits.h>
 
+#ifdef __linux__
+#include <linux/limits.h> /* for XATTR_SIZE_MAX */
+#endif
+
 int open_fd_hw;
 int total_open_fd;
 static int open_fd_rc;
