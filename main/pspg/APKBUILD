# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=pspg
pkgver=5.0.2
pkgrel=0
pkgdesc="A unix pager optimized for psql"
url="https://github.com/okbob/pspg"
arch="all"
options="!check" # there is no tests
license="BSD-2-Clause"
makedepends="automake autoconf postgresql-dev ncurses-dev readline-dev"
source="https://github.com/okbob/pspg/archive/$pkgver/$pkgname-$pkgver.tar.gz
	$pkgname-9d55a76.patch::https://github.com/okbob/pspg/commit/9d55a76ffcedb0dc49310194a62834b381a227a2.patch
	"

prepare() {
	default_prepare
	./autogen.sh
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--localstatedir=/var
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
c6e832020061db3fb942fb4df33063f4da2535dca7e2db0bde4b2542d549ce3d4dee08dc5a24d0dea929325f3185f5e1197c9c968f69febf526b59f49fbb0c7d  pspg-5.0.2.tar.gz
dcf5e849867a6877c5e9c864f4a24d69f414809c5286e692a6df9e99398685b3da71906285b4476a636475e3d66732329cb61d159448e0d7d37f1b9cde42fdf7  pspg-9d55a76.patch
"
