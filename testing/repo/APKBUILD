# Contributor: Antoine Fontaine <antoine.fontaine@epfl.ch>
# Maintainer:
pkgname=repo
pkgver=2.21
pkgrel=0
pkgdesc="repository management tool built on top of git"
url="https://gerrit.googlesource.com/git-repo"
arch="noarch"
license="Apache-2.0"
options="!check" # no tests upstream
depends="python3 py3-kerberos gnupg git"
makedepends="py3-setuptools"
source="https://storage.googleapis.com/git-repo-downloads/repo-$pkgver"
builddir="$srcdir"

prepare() {
	default_prepare
	sed -i 's|^#!/usr/bin/env python|#!/usr/bin/python3|' repo-$pkgver
}

package() {
	install -Dm 0755 repo-$pkgver "$pkgdir"/usr/bin/repo
}

sha512sums="
647439466f9b0efb627ffb0ee8f3ec7d9dce227cc52e777a181c2261f737011f551231ba5e9921a731d449a7ab554f11d2b6ae137abd2d7f8c14aa758f8facf0  repo-2.21
"
