# Contributor: Ivan Tham <pickfire@riseup.net>
# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Drew DeVault <sir@cmpwn.com>
pkgname=ubase
pkgver=20200605
_gitrev=f152e7fc3bd1675060818ac224f96541a2d9d6e7
pkgrel=0
pkgdesc="Suckless collection of unportable base"
url="https://github.com/michaelforney/ubase"
arch="all !mips !mips64"  # fails to build on mips
license="MIT"
subpackages="$pkgname-doc"
source="https://github.com/michaelforney/ubase/archive/$_gitrev/$pkgname-$_gitrev.tar.gz
	config.patch
	"
builddir="$srcdir/$pkgname-$_gitrev"
options="suid !check"  # upstream provides no test suite

build() {
	make
}

package() {
	chmod a+s passwd
	make DESTDIR="$pkgdir" PREFIX=/usr install
}

sha512sums="
3e7c023048b24857267ec57d07b9f19533f8738aac1901d7b421e21e2421e4cc3d6130b3548585f21cda6a8ee99c87098a0648d72cd2f14ad2ff59bf766593bb  ubase-f152e7fc3bd1675060818ac224f96541a2d9d6e7.tar.gz
5b944c737e77f144651e48e5221057b714e14811707f2fc17bfc336c4d32c4792e449e9cbb42d7e2f02c36438721045d961c34b01cf5b342e9e3ed2914d2bcb2  config.patch
"
