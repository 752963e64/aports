# Contributor: Thomas Kienlen <kommander@laposte.net>
# Maintainer: Thomas Kienlen <kommander@laposte.net>
pkgname=gcompris-qt
pkgver=0.97
pkgrel=0
pkgdesc="Educational software suite comprising of numerous activities for children aged 2 to 10"
url="https://gcompris.net"
arch="all !armhf" # armhf blocked by qt5-qtdeclarative
license="GPL-3.0-or-later"
makedepends="cmake extra-cmake-modules qt5-qttools qt5-qttools-dev kdoctools
	qt5-qtdeclarative-dev qt5-qtmultimedia-dev qt5-qtsvg-dev qt5-qtsensors-dev
	qt5-qtquickcontrols2-dev qt5-qtxmlpatterns-dev"
depends="qt5-qtquickcontrols2"
source="$pkgname-$pkgver.tar.xz::https://gcompris.net/download/qt/src/gcompris-qt-$pkgver.tar.xz"
options="!check" # No test suite

build() {
	cmake -B build \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=None \
		-DQML_BOX2D_LIBRARY=/usr/lib/qt/qml/Box2D.2.0 \
		.
	make -C build
}

package() {
	make -C build DESTDIR="$pkgdir" install
}

sha512sums="23cc807238121a6ea3abb8816795b2f3b243c3be1acf782705468d92758a2032a8cb5393c3c30028877d174ff53ebc3a62f69e9045bc70a5281d1d245b6e4eba  gcompris-qt-0.97.tar.xz"
