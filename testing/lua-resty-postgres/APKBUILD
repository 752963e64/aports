# Contributor: Alex Dowad <alexinbeijing@gmail.com>
# Maintainer: Alex Dowad <alexinbeijing@gmail.com>
pkgname=lua-resty-postgres
pkgver=0_git20130420
pkgrel=0
_gitrev=19bc847543381cb4a6142d347d494f4c37054a47
pkgdesc="Nonblocking Lua PostgreSQL driver library"
url="https://github.com/azurewang/lua-resty-postgres"
arch="noarch"
license="BSD"
depends=""
options="!check" # Upstream does not have any test suite
source="
	$pkgname-$pkgver.tar.gz::https://github.com/azurewang/lua-resty-postgres/archive/$_gitrev.tar.gz
	0001-Support-trust-authentication-method.patch"
builddir="$srcdir/lua-resty-postgres-$_gitrev"

package() {
	mkdir -p "$pkgdir/usr/share/lua/common"
	cp -r ./lib/resty "$pkgdir/usr/share/lua/common"
}

sha512sums="
503ded701af082dcefdbdb27e231a9289430689efe20c2aea7c69fabdfa35fee43ff226e6cc6b6a5bde15102692f851fb6524b57ba5274962df7d645b4481ed2  lua-resty-postgres-0_git20130420.tar.gz
d8383f92310ef8edb5af8014a78a8e5e5dec07b949f3215f64913617547c13d617fc59dc73eb8cfd6aadd3fb737e2c8c3140c27dfcea93dbd37a13d15c234148  0001-Support-trust-authentication-method.patch
"
