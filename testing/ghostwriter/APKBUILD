# Maintainer: psykose <alice@ayaya.dev>
pkgname=ghostwriter
pkgver=2.1.6
pkgrel=0
pkgdesc="Distraction-free markdown editor"
url="https://github.com/wereturtle/ghostwriter"
# qt6-qtwebengine
arch="aarch64 x86_64"
license="GPL-3.0-or-later"
depends="qt6-qtsvg"
makedepends="
	hunspell-dev
	qt6-qt5compat-dev
	qt6-qtsvg-dev
	qt6-qttools-dev
	qt6-qtbase-dev
	qt6-qtwebchannel-dev
	qt6-qtwebengine-dev
	"
subpackages="$pkgname-doc $pkgname-lang"
source="$pkgname-$pkgver.tar.gz::https://github.com/wereturtle/ghostwriter/archive/refs/tags/$pkgver.tar.gz"
options="!check" # no tests

build() {
	qmake6 \
		QMAKE_CXXFLAGS="$CXXFLAGS -flto=auto" \
		PREFIX=/usr \
		ghostwriter.pro
	make
}

package() {
	make INSTALL_ROOT="$pkgdir" install
}

lang() {
	install_if="lang $pkgname=$pkgver-r$pkgrel"
	pkgdesc="Languages for package $pkgname"

	amove usr/share/ghostwriter/translations
}

sha512sums="
10ee557a07f468cc12391c2b5f77a6667aef76429b58bfdc03df32dd1cd8c44a61fe77da5318d5b23758ede40a5f8ab89cf4573a09708a6abc2d12ec5ceb71ad  ghostwriter-2.1.6.tar.gz
"
