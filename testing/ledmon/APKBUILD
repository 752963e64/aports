# Contributor: Steve McMaster <code@mcmaster.io>
# Maintainer: Steve McMaster <code@mcmaster.io>
pkgname=ledmon
pkgver=1.0.0
pkgrel=0
pkgdesc="Enclosure LED Utilities"
url="https://github.com/intel/ledmon"
arch="all"
# Provided tests expect to run on a host with supported hardware
options="!check"
license="GPL-2.0-only"
makedepends="automake autoconf eudev-dev libtool linux-headers pciutils-dev sg3_utils-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/intel/ledmon/archive/v$pkgver.tar.gz"
subpackages="$pkgname-doc"

prepare() {
	default_prepare
	autoreconf -vif
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var \
		--disable-static
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
af4dcfaf0284cfc5d88f09d2b4974514f40901c26c640a12ba4ae9bbe16e29e0ca975bc413cf155996162b324b5d365e7bc0306db0329aa755df690ac541a3a6  ledmon-1.0.0.tar.gz
"
