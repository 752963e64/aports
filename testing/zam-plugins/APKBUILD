# Contributor: psykose <alice@ayaya.dev>
# Maintainer: psykose <alice@ayaya.dev>
pkgname=zam-plugins
pkgver=4.0
_dpf=88180608a206b529fcb660d406ddf6f934002806
_pugl=844528e197c51603f6cef3238b4a48d23bf60eb7
pkgrel=0
pkgdesc="Collection of LADSPA/LV2/VST/JACK audio plugins for high-quality processing"
url="https://github.com/zamaudio/zam-plugins"
arch="all"
license="GPL-2.0-or-later"
options="!check" # no testsuite
makedepends="
	bash
	fftw-dev
	jack-dev
	ladspa-dev
	liblo-dev
	libsamplerate-dev
	lv2-dev
	mesa-dev
	zita-convolver-dev
	"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/zamaudio/zam-plugins/archive/refs/tags/$pkgver.tar.gz
	dpf-$_dpf.tar.gz::https://github.com/DISTRHO/DPF/archive/$_dpf.tar.gz
	pugl-$_pugl.tar.gz::https://github.com/DISTRHO/pugl/archive/$_pugl.tar.gz
	"

prepare() {
	default_prepare

	# overwrite folders
	rmdir dpf
	ln -sfv "$srcdir"/DPF-$_dpf dpf

	rmdir dpf/dgl/src/pugl-upstream
	ln -sfv "$srcdir"/pugl-$_pugl dpf/dgl/src/pugl-upstream
}

build() {
	make PREFIX=/usr
}

package() {
	make DESTDIR="$pkgdir" PREFIX=/usr install
}

sha512sums="
c881b3108055e9e1d506c128297c4d3857fa60a0d683c9cd0f99f603532a2ba6547bafb575d56a8a1f0b9c488cb71aecf5e2c2493f1d1cf32ae2ab3605984e0f  zam-plugins-4.0.tar.gz
7ea26d27bfb17fe67d2c4c4077d203b447407986594b833ee545319221c9c08fb434c1ca11ad425a8d9369df41b331c1286ddd85aabdd7a8570ab7a25b88b0e7  dpf-88180608a206b529fcb660d406ddf6f934002806.tar.gz
ad2eb02099d8539dfcffdda093cf4a8dcb1c959d8c4f860bba2a9777f0bfe3d4f2471ae56d5f7be779a8402c5b446e44c2c7aa66ff07bb87787cf0bd8add6772  pugl-844528e197c51603f6cef3238b4a48d23bf60eb7.tar.gz
"
