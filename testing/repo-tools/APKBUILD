# Contributor: Kevin Daudt <kdaudt@alpinelinux.org>
# Maintainer: Kevin Daudt <kdaudt@alpinelinux.org>
pkgname=repo-tools
pkgver=0.1.1
pkgrel=0
pkgdesc="utilities to interact with Alpine Linux repositories"
url="https://gitlab.alpinelinux.org/alpine/infra/repo-tools"
arch="all"
license="MIT"
makedepends="go redo scdoc gettext"
subpackages="
	$pkgname-doc
	$pkgname-bash-completion
	$pkgname-zsh-completion
	$pkgname-fish-completion
	"
options="net !check" # no test suite
source="https://gitlab.alpinelinux.org/alpine/infra/repo-tools/-/archive/v$pkgver/repo-tools-v$pkgver.tar.gz
	build-fix-doc.patch
	"
builddir="$srcdir/$pkgname-v$pkgver"

export GOFLAGS="$GOFLAGS -modcacherw"
export GOMODCACHE="$srcdir/go"

build() {
	echo "$builddir"
	./configure --prefix /usr --strip
	redo
}

package() {
	DESTDIR="$pkgdir" redo install
}

sha512sums="
e1f7f60116480a8611e75de14b3a6e904bcdc00e4b7f218db22c8fca31ddb3cf7a8f0c9331b62beaec08c9c294531e8eff3cd3db4155164ad34c622e9e76d491  repo-tools-v0.1.1.tar.gz
079da89034b8b892c572f81b56061ee99b97754af4257961eb0dffacba7870654bdce5f8f160e18ef479306c92e43698b68ab71f76136f92bcd4f84940d8f0df  build-fix-doc.patch
"
