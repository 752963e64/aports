--- a/clients/lcdproc/machine.h
+++ b/clients/lcdproc/machine.h
@@ -12,6 +12,18 @@
 #ifndef _lcdproc_machine_h_
 #define _lcdproc_machine_h_
 
+/* Include the correct time.h stuff (regardless of selected mechanism) */
+#if TIME_WITH_SYS_TIME
+# include <sys/time.h>
+# include <time.h>
+#else
+# if HAVE_SYS_TIME_H
+#  include <sys/time.h>
+# else
+#  include <time.h>
+# endif
+#endif
+
 #include "shared/LL.h"
 
 #ifndef LOADAVG_NSTATS
