# Contributor: Michał Polański <michal@polanski.me>
# Maintainer: Michał Polański <michal@polanski.me>
pkgname=aardvark-dns
pkgver=1.0.0_rc1
_pkgver=${pkgver/_/-}
pkgrel=0
pkgdesc="Authoritative DNS server for A/AAAA container records"
url="https://github.com/containers/aardvark-dns"
license="Apache-2.0"
arch="all !s390x !riscv64" # blocked by rust/cargo
makedepends="cargo"
source="https://github.com/containers/aardvark-dns/archive/v$_pkgver/aardvark-dns-$pkgver.tar.gz
	minimize-size.patch
	version.patch
	"
builddir="$srcdir/$pkgname-$_pkgver"
options="!check" # no test suite

build() {
	make
}

package() {
	make DESTDIR="$pkgdir" PREFIX=/usr install
}

sha512sums="
a8b958e07ac33fe45e33b297d11d6262dc261326d1894ce9f6c56ff6e2ea3dd5966c492ad1679685805af34e9c6e2d328256f68cca39072758f3ee4af9285333  aardvark-dns-1.0.0_rc1.tar.gz
474ac38c44ba394f780fef0b7fc31d309a036f61d8bfbf42472384f908d5d752a215512a7a68196896cdb9f6681f05834f84906effa5c89af2b51734e5610dce  minimize-size.patch
f540bef1e3a64b9d5dd84cbc6277d8f15219650bb6eb97abaa93a3956d26142d9ddd2865b0ff223a915dea331cbe18f8c1edb3f778135b71e98281e30cb7fac4  version.patch
"
