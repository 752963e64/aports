# Contributor: Gavin D. Howard <yzena.tech@gmail.com>
# Maintainer: Gavin D. Howard <yzena.tech@gmail.com>
pkgname=howard-bc
pkgver=5.0.1
pkgrel=0
pkgdesc="POSIX bc with GNU extensions"
url="https://github.com/gavinhoward/bc"
arch="all"
license="BSD-2-Clause"
subpackages="$pkgname-doc"
source="https://github.com/gavinhoward/bc/releases/download/$pkgver/bc-$pkgver.tar.xz"
builddir="$srcdir/bc-$pkgver"

case "$CARCH" in
	aarch64)
		# See: https://github.com/gavinhoward/bc/issues/36
		options="$options !check"
		;;
esac

build() {
	PREFIX=/usr DESTDIR="$pkgdir" EXECSUFFIX=-howard ./configure.sh -GN
	make
}

check() {
	make test
}

package() {
	make install
}

sha512sums="
8143e24babffd6f50cee6308ac47a0b8d2c5f78abd00ada53fc2e31c778545f5cee32587a18a2d721fe0ac7ea32520b5854f6874bf762555b5718dbc136ebfe1  bc-5.0.1.tar.xz
"
