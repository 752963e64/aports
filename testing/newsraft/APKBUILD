# Contributor: Grigory Kirillov <txgk@bk.ru>
# Maintainer: Grigory Kirillov <txgk@bk.ru>
pkgname=newsraft
pkgver=0.2
pkgrel=0
pkgdesc="Feed reader with ncurses user interface"
url="https://codeberg.org/grisha/newsraft"
arch="all"
license="MIT"
options="!check" # no test suite
makedepends="
	ncurses-dev
	sqlite-dev
	curl-dev
	expat-dev
	yajl-dev
	gumbo-parser-dev
	meson
	samurai
	scdoc
	"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://codeberg.org/grisha/newsraft/archive/$pkgver.tar.gz"
builddir="$srcdir/newsraft"

prepare() {
	sed -i '/cppcheck/d' meson.build
}

build() {
	abuild-meson builddir
	meson compile ${JOBS:+-j ${JOBS}} -C builddir
}

package() {
	DESTDIR="$pkgdir" meson install -C builddir
}

sha512sums="
9ab583993f9c037ff9069c9bb9f8972a275c39cc57f7319e5f4fdec3a9ed0543431467128a3b53e09afb0b2c4650c64f45e52daf17427941e055610d5f6dba0c  newsraft-0.2.tar.gz
"
