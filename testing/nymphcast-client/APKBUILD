# Contributor: Bart Ribbers <bribbers@disroot.org>
# Maintainer: Bart Ribbers <bribbers@disroot.org>
pkgname=nymphcast-client
pkgver=0_git20200306
pkgrel=0
_commit="ba21049ebdc83be83ecc2d46912463dba6c5f074"
arch="all !armv7" # armv7 blocked by nymphcast
url="http://nyanko.ws/product_nymphcast.php"
pkgdesc="Test client for nymphcast"
license="BSD-3-Clause"
depends="avahi"
makedepends="qt5-qtbase-dev nymphcast-dev nymphrpc-dev nymphcast-static nymphrpc-static"
source="$pkgname-$_commit.tar.gz::https://github.com/MayaPosch/NymphCast/archive/$_commit.tar.gz"
options="!check" # No tests
builddir="$srcdir/NymphCast-$_commit"

prepare() {
	default_prepare

	mkdir "$builddir"/player/NymphCastPlayer/build
}

build() {
	cd "$builddir"/player/NymphCastPlayer/build
	qmake-qt5 ..
	make
}

package() {
	cd "$builddir"/player/NymphCastPlayer/build
	install -Dm755 NymphCastPlayer "$pkgdir"/usr/bin/NymphCastPlayer
}

sha512sums="038d55823dc568a1b258c3ab4ce538c78c258daa3034ec8da1060562fbf62503ebf04112ccc3252199468878150b407d1f21e11637207c33fe8fd3123637987c  nymphcast-client-ba21049ebdc83be83ecc2d46912463dba6c5f074.tar.gz"
