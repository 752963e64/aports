# Contributor: Alistair Francis <alistair@alistair23.me>
# Maintainer: Alistair Francis <alistair@alistair23.me>
pkgname=read-it-later
pkgver=0.0.2
pkgrel=0
pkgdesc="Wallabag Client built with GTK"
url="https://gitlab.gnome.org/World/read-it-later"
arch="all !s390x !mips64 !riscv64" # cargo, rust not found
license="GPL-3.0-only"
makedepends="meson bash rust cargo webkit2gtk-dev libhandy-dev sqlite-dev
	gettext-dev openssl-dev"
source="read-it-later-$pkgver.tar.gz::https://gitlab.gnome.org/World/read-it-later/-/archive/$pkgver/read-it-later-$pkgver.tar.gz
	fix-wallabag-api.patch
	"
options="!check" # no tests

build() {
	abuild-meson . output
	meson compile ${JOBS:+-j ${JOBS}} -C output
}

check() {
	meson test --no-rebuild -v -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

sha512sums="
fce6d6896e434793c03b65c9f960a3006af807084cbc1538a3e1324e2b1aac22ffb284e41e8a4ee94c533cd3cb900256cbf65c97f5e61e6b0938566d2850e459  read-it-later-0.0.2.tar.gz
4eb0d9ed2427189f854886ef4611a2d4c1e98885ceea8a41c8be3cd1b571ad09d8dbf0d3dbfe3128e511391209407388cd1caa4e12ea15ef0c4117eb769ec824  fix-wallabag-api.patch
"
