# Contributor: Maxim Karasev <begs@disroot.org>
# Maintainer: Dmitry Kruchko <corg@disroot.org>
pkgname=libsixel
pkgver=1.10.3
pkgrel=1
pkgdesc="SIXEL encoder/decoder implementation"
url="https://github.com/libsixel/libsixel"
arch="all"
license="MIT"
makedepends="meson libpng-dev libjpeg-turbo-dev zlib-dev libtool"
subpackages="
	$pkgname-dev
	$pkgname-doc
	$pkgname-bash-completion
	$pkgname-zsh-completion
	"
source="https://github.com/libsixel/libsixel/archive/v$pkgver/libsixel-$pkgver.tar.gz
	no-need-for-unistd.h.patch" # drop that patch after next upgrade

build() {
	abuild-meson . output
	meson compile -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

sha512sums="
ef16f9ccecec8289728ec84ce9f24145648f8a38184c1ec3df8ead3499c6cf7d3e0a0c738f8bfcb1093e16ee8ae7ce5e46d3890707c8104752ce4ab7eb3bc7ac  libsixel-1.10.3.tar.gz
4e18700c4415817f6937e432bcd68ccf6979867710bedb8ad035ea84222c522683bbd6014b5895f7e0f518605fec5cb44d4a9ca6d28c9b3061e2a4f6e87cb3fa  no-need-for-unistd.h.patch
"
