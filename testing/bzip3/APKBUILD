# Contributor: Grigory Kirillov <txgk@bk.ru>
# Maintainer: Grigory Kirillov <txgk@bk.ru>
pkgname=bzip3
pkgver=1.0.1
pkgrel=0
pkgdesc="Better and stronger spiritual successor to BZip2"
url="https://github.com/kspalaiologos/bzip3"
# x86: textrels
arch="all !x86"
license="LGPL-3.0-only"
subpackages="$pkgname-libs $pkgname-dev"
source="https://github.com/kspalaiologos/bzip3/archive/$pkgver/bzip3-$pkgver.tar.gz"

build() {
	CFLAGS="$CFLAGS -Iinclude"
	make all
}

check() {
	make check
}

package() {
	install -Dm755 bzip3 -t "$pkgdir"/usr/bin/
	install -Dm644 include/libbz3.h -t "$pkgdir"/usr/include/
	install -Dm755 libbzip3.so -t "$pkgdir"/usr/lib/
}

libs() {
	pkgdesc="$pkgdesc (library)"
	mkdir -p "$subpkgdir"/usr/lib
	mv "$pkgdir"/usr/lib/libbzip3.so "$subpkgdir"/usr/lib/
}

sha512sums="
03560506a3e1e8eb2520cafe3c9a6222f00339f0747e6af0ec5042b84dbd3e3959907f388b2a76555597fa087e9af1c91618a2c5c84eb2ba3b5d8572565886aa  bzip3-1.0.1.tar.gz
"
