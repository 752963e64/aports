# Contributor: Alex Yam <alex@alexyam.com>
# Maintainer: Alex Yam <alex@alexyam.com>
pkgname=mm-common
pkgver=1.0.4
pkgrel=0
arch="noarch"
pkgdesc="Build infrastructure and utilities for GNOME C++ binding libraries"
options="!check" # No test suite
url="https://gitlab.gnome.org/GNOME/mm-common"
license="GPL-2.0-or-later"
depends="
	autoconf
	automake
	gtkmm3-dev
	glibmm-dev
	"
subpackages="$pkgname-doc"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/GNOME/mm-common/archive/$pkgver.tar.gz
	http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/libstdc++.tag
	"

prepare() {
	default_prepare
	./autogen.sh

	cp $srcdir/libstdc++.tag $builddir/doctags/
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--disable-network	# Download libstdc++.tag outside configure
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
58a6202115a7c888306d169a0850c5cdbe44c9bbf1e29a4569051a9feeea47bce830615640d2b83ba4396a9d930d65834964e91c534ffe9922eecfcfbf1259c9  mm-common-1.0.4.tar.gz
91975262b304a2bb55c662c50430d79b3d626e18e5ed2fe89f1b73e1cdb394e456523d5d395ec44979b00a03b312f18a581836f084d2ffacfaf7e3c1f2e98a73  libstdc++.tag
"
