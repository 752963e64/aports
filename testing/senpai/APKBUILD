# Contributor: Francesco Camuffo <dev@fmac.xyz>
# Maintainer: Francesco Camuffo <dev@fmac.xyz>
pkgname=senpai
pkgver=0_git20210929
_commit=928c0a068601884260b0fb22a551d35854e6af91
pkgrel=0
pkgdesc="Your everyday IRC student"
url="https://git.sr.ht/~taiite/senpai"
arch="all"
license="ISC"
makedepends="go scdoc"
subpackages="$pkgname-doc"
source="https://git.sr.ht/~taiite/senpai/archive/$_commit.tar.gz"
builddir="$srcdir/$pkgname-$_commit"

build() {
	go build ./cmd/senpai
	make doc/senpai.1
	make doc/senpai.5
	gzip doc/senpai.1
	gzip doc/senpai.5
}

check() {
	go test ./...
}

package() {
	install -Dm0755 "$builddir"/senpai "$pkgdir"/usr/bin/senpai
	install -Dm0644 "$builddir"/doc/senpai.1.gz "$pkgdir"/usr/share/man/man1/senpai.1.gz
	install -Dm0644 "$builddir"/doc/senpai.5.gz "$pkgdir"/usr/share/man/man5/senpai.5.gz
}

sha512sums="
a87dbff56615b2fbe6a330be4a6551e9aeb356963bf8d3e6adc4cb275d53c485e95583d20f86278a0b9d91e9f3759e3d838efe187fcf29b605b2ed09486e14b2  928c0a068601884260b0fb22a551d35854e6af91.tar.gz
"
