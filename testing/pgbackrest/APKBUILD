# Contributor: Milan P. Stanić <mps@arvanta.net>
# Maintainer: Milan P. Stanić <mps@arvanta.net>
pkgname=pgbackrest
pkgver=2.36
pkgrel=0
pkgdesc="reliable postgresql backup & restore"
url="https://www.pgbackrest.org/"
arch="all"
license="MIT"
options="!check" # no test
makedepends="openssl1.1-compat-dev libxml2-dev perl libpq-dev zlib-dev bzip2-dev yaml-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/pgbackrest/pgbackrest/archive/release/$pkgver.tar.gz"
builddir="$srcdir/$pkgname"-release-$pkgver

build() {
echo $builddir
	cd $builddir/src
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	cd ..
	make -C src
}

package() {
	make -C src DESTDIR="$pkgdir" install
}

sha512sums="
7536769d341c0b70c2fecc7e27869d48824135630be7e3e3618a91ca559de3a66d1b96d5ae9edf37ebb203d7188d61698c0c26403e27b2d3c0f6b2977de7c200  pgbackrest-2.36.tar.gz
"
