Patch-Source: https://github.com/riquito/tuc/pull/57
--
From b676dcad45ef350989b3e6d6b8d3b5da9c457fa3 Mon Sep 17 00:00:00 2001
From: Jakub Jirutka <jakub@jirutka.cz>
Date: Sat, 25 Jun 2022 22:18:47 +0200
Subject: [PATCH] Disable unnecessary regex features to reduce binary size

This will reduce the size of the tuc binary built with regex feature
by 54 %.

x86_64-alpine-linux-musl target:

* with full regex: 1.3 MiB
* with regex w/o default features: 602 kiB
* without regex: 350 kiB
---
 Cargo.lock | 11 -----------
 Cargo.toml |  2 +-
 2 files changed, 1 insertion(+), 12 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index c6abeb5..431f07f 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -2,15 +2,6 @@
 # It is not intended for manual editing.
 version = 3
 
-[[package]]
-name = "aho-corasick"
-version = "0.7.18"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "1e37cfd5e7657ada45f742d6e99ca5788580b5c529dc78faf11ece6dc702656f"
-dependencies = [
- "memchr",
-]
-
 [[package]]
 name = "anyhow"
 version = "1.0.58"
@@ -126,8 +117,6 @@ version = "1.5.6"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "d83f127d94bdbcda4c8cc2e50f6f84f4b611f69c902699ca385a39c3a75f9ff1"
 dependencies = [
- "aho-corasick",
- "memchr",
  "regex-syntax",
 ]
 
diff --git a/Cargo.toml b/Cargo.toml
index bd2254c..fe3516f 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -16,7 +16,7 @@ categories = ["command-line-utilities"]
 [dependencies]
 anyhow = "1.0.58"
 pico-args = { version = "0.5.0", features = ["short-space-opt", "combined-flags", "eq-separator"] }
-regex = { version = "1.5", optional = true }
+regex = { version = "1.5", default-features = false, features = ["std"], optional = true }
 
 [features]
 default = []
