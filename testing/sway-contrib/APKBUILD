# Contributor: fossdd <fossdd@pwned.life>
# Maintainer: fossdd <fossdd@pwned.life>
pkgname=sway-contrib
pkgver=1.9.0
_realver="1.9-contrib.0"
pkgrel=0
pkgdesc="A collection of user-contributed scripts for sway"
url="https://github.com/OctopusET/sway-contrib"
arch="noarch"
license="MIT"
depends="
	python3
	py3-i3ipc
	"
subpackages="
	$pkgname-doc
	grimshot
	grimshot-doc:grimshot_doc
	"
source="$pkgname-$pkgver.tar.gz::https://github.com/OctopusET/sway-contrib/archive/refs/tags/$_realver.tar.gz"
builddir="$srcdir/$pkgname-$_realver"
options="!check" # no tests available

package() {
	install -dm755 "$pkgdir/usr/share/$pkgname"

	install -Dm755 "autoname-workspaces.py" -t "$pkgdir/usr/share/$pkgname/"
	install -Dm755 "firefox-focus-monitor.py" -t "$pkgdir/usr/share/$pkgname/"
	install -Dm755 "inactive-windows-transparency.py" -t "$pkgdir/usr/share/$pkgname/"
	install -Dm755 "layout-per-window.py" -t "$pkgdir/usr/share/$pkgname/"
	install -Dm755 "switch-top-level.py" -t "$pkgdir/usr/share/$pkgname/"

	install -dm755 "$pkgdir/usr/share/doc/$pkgname"
	install -Dm644 README.md -t "$pkgdir/usr/share/doc/$pkgname"

	install -dm755 "$pkgdir/usr/share/$pkgname"
	install -Dm644 LICENSE -t "$pkgdir/usr/share/licenses/$pkgname"
}

grimshot() {
	pkgdesc="Script for taking screenshots with grim and slurp on Sway"
	depends="
		cmd:grim
		cmd:jq
		cmd:notify-send
		cmd:slurp
		cmd:swaymsg
		cmd:wl-copy
		"

	install -Dm755 "$builddir/grimshot" -t "$subpkgdir/usr/bin/"
}

grimshot_doc() {
	install -Dm644 "$builddir/grimshot.1" -t "$subpkgdir/usr/share/man/man1/"

	default_doc
	pkgdesc="Documentation for grimshot"
	install_if="docs ${subpkgname%-doc}=$pkgver-r$pkgrel"
}

sha512sums="
74f4e7fd24ca757c16f9af5cefc78f6bd66af4e2112e34b0332cc0e6b8b0c46c73e6d702e8da29d8fbb5725097fccc058ba01427ae8cc6e1af3a60c952b8cce9  sway-contrib-1.9.0.tar.gz
"
