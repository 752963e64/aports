# Contributor: omni <omni@gitlab.alpinelinux.org>
# Maintainer: omni <omni@gitlab.alpinelinux.org>
pkgname=amfora
pkgver=1.7.2
pkgrel=0
pkgdesc="terminal browser for the Gemini protocol"
arch="all !mips64" # no go lang on mips64
url="https://github.com/makeworld-the-better-one/amfora"
license="GPL-3.0-or-later"
makedepends="go"
source="$pkgname-$pkgver.tar.gz::https://github.com/makeworld-the-better-one/amfora/archive/v$pkgver.tar.gz"

export GOPATH="$srcdir"
export GOFLAGS="$GOFLAGS -trimpath -mod=readonly -modcacherw"

build() {
	go build -v .
}

check() {
	go test -v ./...
}

package() {
	install -Dm0755 "$pkgname" -t "$pkgdir"/usr/bin
}

sha512sums="05b8ca57114bf3167655a96be0e4b337aaf4422ffdf554168554c526ab909dcb105e503f357036ded319ef625ce2bcf601f585e7db1c25292c79d77fc1c14380  amfora-1.7.2.tar.gz"
