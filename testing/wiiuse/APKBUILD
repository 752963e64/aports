# Contributor: Bart Ribbers <bribbers@disroot.org>
# Maintainer: Bart Ribbers <bribbers@disroot.org>
pkgname=wiiuse
pkgver=0.15.5
pkgrel=0
pkgdesc="Feature complete cross-platform Wii Remote access library"
url="https://github.com/wiiuse/wiiuse"
arch="all"
license="GPL-3.0-or-later"
makedepends="
	bluez-dev
	cmake
	freeglut-dev
	mesa-dev
	sdl12-compat-dev
	"
subpackages="$pkgname-doc $pkgname-dev $pkgname-tools"
source="https://github.com/wiiuse/wiiuse/archive/$pkgver/wiiuse-$pkgver.tar.gz
	0001-Various-CMake-improvements.patch
	"
options="!check" # No tests

build() {
	cmake -B build \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DBUILD_SHARED_LIBS=ON
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

tools() {
	amove usr/bin
}

sha512sums="
51a5abb8473b02a4537a73beb3f0012207294a828c332163ed2e99fa06e9905f590c7a0dc756a9182547c055c9b2218106e0a90dee7373fe33b8187c797cd3b8  wiiuse-0.15.5.tar.gz
654758a0b626adcc95d72a65d6ef2d010cb13c2c725b85bab32bd087d6fdf58d066929a91ed789247cba08945b0e474940473c2a1f37b2649a14f5986ba7eb40  0001-Various-CMake-improvements.patch
"
