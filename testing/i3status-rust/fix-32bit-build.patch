Patch-Source: https://github.com/greshake/i3status-rust/commit/b2c2bc0fc1e035c860818525e9a78edd8554e615
--
diff --git a/src/blocks/disk_space.rs b/src/blocks/disk_space.rs
index 244b87ba1..630545e41 100644
--- a/src/blocks/disk_space.rs
+++ b/src/blocks/disk_space.rs
@@ -114,10 +114,16 @@ pub async fn run(config: Config, mut api: CommonApi) -> Result<()> {
     loop {
         let statvfs = statvfs(&*path).error("failed to retrieve statvfs")?;

-        let total = statvfs.blocks() * statvfs.fragment_size();
-        let used = (statvfs.blocks() - statvfs.blocks_free()) * statvfs.fragment_size();
-        let available = statvfs.blocks_available() * statvfs.block_size();
-        let free = statvfs.blocks_free() * statvfs.block_size();
+        // Casting to be compatible with 32-bit systems
+        #[allow(clippy::unnecessary_cast)]
+        let (total, used, available, free) = {
+            let total = (statvfs.blocks() as u64) * (statvfs.fragment_size() as u64);
+            let used = ((statvfs.blocks() as u64) - (statvfs.blocks_free() as u64))
+                * (statvfs.fragment_size() as u64);
+            let available = (statvfs.blocks_available() as u64) * (statvfs.block_size() as u64);
+            let free = (statvfs.blocks_free() as u64) * (statvfs.block_size() as u64);
+            (total, used, available, free)
+        };

         let result = match config.info_type {
             InfoType::Available => available,
