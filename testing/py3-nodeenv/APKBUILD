# Contributor: Duncan Bellamy <dunk@denkimushi.com>
# Maintainer: Duncan Bellamy <dunk@denkimushi.com>
pkgname=py3-nodeenv
_pkgname=nodeenv
pkgver=1.4.0
pkgrel=0
pkgdesc="Node.js virtual environment builder"
url="https://ekalinin.github.io/nodeenv/"
arch="all !x86" #prebuilt node binaries are not availible for x86
arch="$arch !mips64" # no nodejs
license="BSD-3-Clause"
depends="nodejs"
checkdepends="py3-pytest py3-mock py3-pytest-cov"
makedepends="python3-dev py3-setuptools"
source="$_pkgname-$pkgver.tar.gz::https://github.com/ekalinin/nodeenv/archive/$pkgver.tar.gz
	10-alpine.patch"
builddir="$srcdir/$_pkgname-$pkgver"

build() {
	python3 setup.py build
}

check() {
	PYTHONPATH="$builddir/src" python3 -m pytest .
}

package() {
	python3 setup.py install --prefix=/usr --root="$pkgdir"
}

sha512sums="0c4faa562ca00a1a4196f9eace87d32a7d5d9ea39c9272a886eeb2ce3538bf071041efb1f32fb7511793e6f5d12ecca1d7d8e6b8639b10a2feed35a2eb2712a6  nodeenv-1.4.0.tar.gz
d3c766efc8bf33ee840ddfe4bfa33fce75586dc979672dfb3ef4e9a1be5391c1efe1de065bd33b9aacd22ca3d2b20724a142d86011ca736ff19537d89086373f  10-alpine.patch"
