# Contributor: Matthew T Hoare <matthew.t.hoare@gmail.com>
# Maintainer: Matthew T Hoare <matthew.t.hoare@gmail.com>
pkgname=oksh
pkgver=6.8
pkgrel=0
pkgdesc="Portable OpenBSD ksh, based on the Public Domain KornShell (pdksh)"
url="https://github.com/ibara/oksh"
arch="all"
license="BSD-3-Clause"
options="!check" # no checks
install="$pkgname.post-install $pkgname.post-upgrade $pkgname.pre-deinstall"
subpackages="$pkgname-doc"
source="https://github.com/ibara/oksh/archive/oksh-$pkgver.tar.gz
	10-musl-ctrl-define.patch"
builddir="$srcdir/$pkgname-$pkgname-$pkgver"

build() {
	./configure \
		--bindir=/bin \
		--mandir=/usr/share/man
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="5dea088247f0b29eecf5ed9b8b6a9b0aa27e5e27fffa06a3cb1cdc44e8d40aa97b998407efe06b36acddbb375e4de0f4e651dda32023c74b1df9423ee1f7136d  oksh-6.8.tar.gz
4ab5071b6a6aaf94597a42f5c34b7dcf8250402df7dc1dc4fbb4f93439db8fea1f5529c31ca365bc5563108d44f9dde7a6a877fb1236401e67800d85c14a4a23  10-musl-ctrl-define.patch"
