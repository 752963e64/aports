# Contributor: mio <miyopan@e.email>
# Maintainer: mio <miyopan@e.email>
pkgname=offpunk
pkgver=1.9
pkgrel=0
pkgdesc="An offline-first browser for the small internet"
url="https://git.sr.ht/~lioploum/offpunk"
license="BSD-2-Clause"
arch="noarch !s390x !riscv64" # Missing libimagequant on 390x and riscv64
# Mandatory/recommended deps: file less py3-cryptography xdg-utils
depends="chafa file less libimagequant python3 py3-beautifulsoup4
	py3-cryptography py3-feedparser py3-pillow py3-readability-lxml py3-requests
	py3-setproctitle timg xdg-utils xsel"
makedepends="py3-setuptools"
subpackages="$pkgname-doc"
source="offpunk-$pkgver.tar.gz::https://git.sr.ht/~lioploum/offpunk/archive/v$pkgver.tar.gz"
options="!check" # No tests
builddir="$srcdir"/offpunk-v"$pkgver"

build() {
	python3 setup.py build
}

package() {
	python3 setup.py install --root="$pkgdir"
	install -Dm0644 man/"$pkgname".1 "$pkgdir"/usr/share/man/man1/"$pkgname".1
	install -Dm0644 README.md "$pkgdir"/usr/share/doc/"$pkgname"/README.md
	install -Dm0644 LICENSE "$pkgdir"/usr/share/licenses/"$pkgname"/LICENSE
}

sha512sums="
d9f5c41d6c64d867587c39206fb1df67e55fddb58b3d0213fe6ab275375fa74fb72b3898fb317382dd32645c1a61b7385254ea06e85bd5c13da1942644d93d4e  offpunk-1.9.tar.gz
"
