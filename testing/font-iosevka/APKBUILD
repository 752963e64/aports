# Contributor: psykose <alice@ayaya.dev>
# Maintainer: psykose <alice@ayaya.dev>

pkgname=font-iosevka
pkgver=10.3.4
pkgrel=0
pkgdesc="Versatile typeface for code, from code."
url="https://typeof.net/Iosevka/"
arch="noarch"
options="!check" # no testsuite
license="OFL-1.1"
depends="fontconfig"
subpackages="
	$pkgname-base
	$pkgname-slab
	$pkgname-curly
	$pkgname-curly-slab
	$pkgname-aile
	$pkgname-etoile
	"
source="
	https://github.com/be5invis/Iosevka/releases/download/v$pkgver/super-ttc-iosevka-$pkgver.zip
	https://github.com/be5invis/Iosevka/releases/download/v$pkgver/super-ttc-iosevka-slab-$pkgver.zip
	https://github.com/be5invis/Iosevka/releases/download/v$pkgver/super-ttc-iosevka-curly-$pkgver.zip
	https://github.com/be5invis/Iosevka/releases/download/v$pkgver/super-ttc-iosevka-curly-slab-$pkgver.zip
	https://github.com/be5invis/Iosevka/releases/download/v$pkgver/super-ttc-iosevka-aile-$pkgver.zip
	https://github.com/be5invis/Iosevka/releases/download/v$pkgver/super-ttc-iosevka-etoile-$pkgver.zip
	"

builddir="$srcdir"

_install_font_ttc() {
	find "$srcdir" -iname "$1.ttc" | while read -r ttc; do
		echo "${ttc##*/}"
		install -Dm644 "$ttc" -t "$subpkgdir"/usr/share/fonts/TTC
	done
}

package() {
	for pkg in $subpackages; do
		depends="$depends $pkg"
	done
	mkdir -p "$pkgdir"
}

base() {
	pkgdesc="$pkgdesc (Iosevka)"
	_install_font_ttc "iosevka"
}

slab() {
	pkgdesc="$pkgdesc (Iosevka Slab)"
	_install_font_ttc "iosevka-slab"
}

curly() {
	pkgdesc="$pkgdesc (Iosevka Curly)"
	_install_font_ttc "iosevka-curly"
}

curly_slab() {
	pkgdesc="$pkgdesc (Iosevka Curly Slab)"
	_install_font_ttc "iosevka-curly-slab"
}

aile() {
	pkgdesc="$pkgdesc (Iosevka Aile)"
	_install_font_ttc "iosevka-aile"
}

etoile() {
	pkgdesc="$pkgdesc (Iosevka Etoile)"
	_install_font_ttc "iosevka-etoile"
}

sha512sums="
c7fac0a44b65abde0826050494bb980bbc529cc940a8800670a6dcb18a2176efcb875dfff4f08e85f26dcd257984142c40ce86191172cf674a8e076dee684b73  super-ttc-iosevka-10.3.4.zip
07ae3e3d3ae4109b0a98f355627896a5bf8e8c68f51d5b51a87dea954ca88f72cd38e8aa4c7b00e1cdc23855d02bc1123771d372ead44e67934e3b40cc5b0537  super-ttc-iosevka-slab-10.3.4.zip
6161cdca6574e250e501481e459cec3cede7f5dcae9d6c776849e14587832f079126cf7b6a9e7d4b6dcd00fa4775e7c39de70ffb36504feb107ce068e9d5407e  super-ttc-iosevka-curly-10.3.4.zip
64a9e768f7aa01dcbe7b0f63ce5ab3c3a1ad058551c3a69e7adca3aa3450c0e25aa68404d25e36c83dc0d1d97557725f889a33a86562ff9dd75465520267a7b3  super-ttc-iosevka-curly-slab-10.3.4.zip
ca184e3b9ed15899a498a40bd66aa746643c0ba34d0651a2ea64ff35de78602e7d94eb004e724fcd972dce880fb4663747d351667df8368a47855453e1e79bab  super-ttc-iosevka-aile-10.3.4.zip
067b0c0fd92888a7f931371a9e2b5df69a5480a70932d860479ad5e68364309dfc53befb6cfac85c3fd4e295921aa868a0f5e5af175458ccdf522bec0092bcdf  super-ttc-iosevka-etoile-10.3.4.zip
"
