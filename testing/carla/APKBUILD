# Contributor: Magnus Sandin <magnus.sandin@gmail.com>
# Maintainer: Magnus Sandin <magnus.sandin@gmail.com>
pkgname=carla
pkgver=2.4.2
pkgrel=0
pkgdesc="Fully-featured audio plugin host"
url="https://github.com/falkTX/Carla"
options="!check" # No tests available
arch="x86 x86_64"
license="GPL-2.0-or-later"
depends="py3-qt5 python3 qt5-qtsvg"
depends_dev="$pkgname"
makedepends="
	alsa-lib-dev
	file-dev
	fluidsynth-dev
	liblo-dev
	libsndfile-dev
	libx11-dev
	linux-headers
	pulseaudio-dev
	qt5-qtbase-dev
	qt5-qtsvg-dev
	"
subpackages="$pkgname-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/falkTX/Carla/archive/refs/tags/v$pkgver.tar.gz
	add-types.patch
	"
builddir="$srcdir/Carla-$pkgver"

build() {
	make features
	make
}

package() {
	make install PREFIX=/usr DESTDIR="$pkgdir"
}

sha512sums="
70b53ed681565a59398b3626c5aff2ccd46c6fe55c6f22796408d0b851620e6f0a502b6122df10a189d7706ca9baf471bbc735c14eacf610f3257ec0409eae65  carla-2.4.2.tar.gz
38bf609eabe62b2d35adafbfd4f9a7d367e17812a358ecfdc81f303faf704295c254b8612e4baf6c1d680550c04fe306cd9992f9c72be6228e88ccd291719bcd  add-types.patch
"
