# Contributor: wener <wenermail@gmail.com>
# Maintainer: wener <wenermail@gmail.com>
pkgname="sqlar"
pkgver=0_git20180107
pkgrel=0
pkgdesc="SQLite Archiver"
url="https://sqlite.org/sqlar"
arch="all"
license="BSD-2-Clause"
makedepends="zlib-dev sqlite-dev fuse-dev"
options="!check" # does not have a test suite
source="sqlar-v$pkgver.tar.gz::https://www.sqlite.org/sqlar/tarball/sqlar.tar.gz?c=4824e7389653a46f"
builddir="$srcdir/$pkgname"

build() {
	gcc sqlarfs.c -D_FILE_OFFSET_BITS=64 -lsqlite3 -lfuse -lz -o sqlarfs
	gcc sqlar.c -D_FILE_OFFSET_BITS=64 -lsqlite3 -lz -o sqlar
}

package() {
	install -Dm755 sqlar "$pkgdir"/usr/bin/sqlar
	install -Dm755 sqlarfs "$pkgdir"/usr/bin/sqlarfs
}

sha512sums="b8c9c047b40b8b8065338f32801d0f2c46e14420735c3667ecbe3c75c0c9e5d87f6007c1022fea0c74ad93b653cc6845fabd66dcf637e8a85470a007fd50dd83  sqlar-v0_git20180107.tar.gz"
