# Maintainer: Drew DeVault <sir@cmpwn.com>
pkgname=himitsu
pkgver="0_git20220616"
_commit=003c14747fcddceb5359c9503f20c44b15fea5fa
pkgrel=1
pkgdesc="A secret storage manager"
url="https://himitsustore.org"
arch="x86_64 aarch64" # Hare
license="GPL-3.0-only"
makedepends="hare scdoc"
subpackages="$pkgname-doc $pkgname-dev"
source="
	$pkgname-$_commit.tar.gz::https://git.sr.ht/~sircmpwn/himitsu/archive/$_commit.tar.gz
"
builddir="$srcdir/$pkgname-$_commit"

build() {
	make -j1 PREFIX=/usr
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" PREFIX=/usr install
}

dev() {
	mkdir -p "$subpkgdir"/usr/src/
	mv "$pkgdir"/usr/src/hare "$subpkgdir"/usr/src/
	rm -r "$pkgdir"/usr/src
}

sha512sums="
46f862bafe4d2b9ea0ada8699ece4bac3b15f8186452039ae49d859b353704676c28669c0ec413ab9744a44b2bc6567e961afa319e5177674aecdf8d727eaaed  himitsu-003c14747fcddceb5359c9503f20c44b15fea5fa.tar.gz
"
