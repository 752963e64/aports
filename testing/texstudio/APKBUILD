# Contributor: Jonas <3426-spameier@users.gitlab.alpinelinux.org>
# Maintainer: Jonas <3426-spameier@users.gitlab.alpinelinux.org>
pkgname=texstudio
pkgver=4.2.1
pkgrel=0
pkgdesc="fully featured LaTeX editor"
url="https://www.texstudio.org"
arch="all"
license="GPL-3.0-or-later"
depends="qt5-qtbase"
makedepends="qt5-qtbase-dev qt5-qttools-dev qt5-qtsvg-dev qt5-qtscript-dev
	qt5-qttools-dev poppler-qt5-dev qt5-qtdeclarative-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/texstudio-org/texstudio/archive/$pkgver.tar.gz"

build() {
	QTDIR=/usr/lib/qt5
	PATH=$QTDIR/bin:$PATH
	LD_LIBRARY_PATH=$QTDIR/lib:$LD_LIBRARY_PATH
	DYLD_LIBRARY_PATH=$QTDIR/lib:$DYLD_LIBRARY_PATH
	export QTDIR PATH LD_LIBRARY_PATH DYLD_LIBRARY_PATH
	qmake-qt5 PREFIX=/usr CONFIG-=debug CONFIG-=debug_and_release CONFIG+=release texstudio.pro
	make
}

check() {
	qmake-qt5
	make
}

package() {
	mkdir -p "$pkgdir/usr/share"
	make INSTALL_PATH="$pkgdir" INSTALL_ROOT="$pkgdir" PREFIX="/usr" install
}
sha512sums="
2a3e435b7ac0ae2ce317b0de31f525c02bea39917b4ec5740f293109e09325008dfc174da41412c491376226f4cf458bd91e2d92f8b15cf4f3e41d82bc205bb4  texstudio-4.2.1.tar.gz
"
