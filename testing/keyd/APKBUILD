# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=keyd
pkgver=1.1.2
pkgrel=0
pkgdesc="A key remapping daemon for Linux"
url="https://github.com/rvaiya/keyd"
arch="all"
license="MIT"
makedepends="eudev-dev linux-headers"
subpackages="$pkgname-doc $pkgname-openrc"
source="https://github.com/rvaiya/keyd/archive/v$pkgver/keyd-$pkgver.tar.gz
	ungit.patch
	obey-build-flags.patch
	$pkgname.initd
	"
options="!check"  # no tests provided

build() {
	make
}

package() {
	make install DESTDIR="$pkgdir"
	rm -rf "$pkgdir"/usr/lib/systemd

	install -D -m755 "$srcdir"/$pkgname.initd "$pkgdir"/etc/init.d/$pkgname
	echo uinput | install -D -m644 /dev/stdin "$pkgdir"/usr/lib/modules-load.d/$pkgname.conf
}

sha512sums="
c8a3287e6f6b3b778b8db63fd1c0005ed2e93706f659c8e9c5029791e1b226eea9e73e72602607a21a5121b74776f7dc941327ea00d6f38e7201349c8221052c  keyd-1.1.2.tar.gz
de80226c88e782fd39ea930dc6ac218584c62f3847251c3c506df3c461261ec87e2cfffdcb50a8e854d66ea333a3a1ae7f7c837b048d61798cfc07b65b01ef19  ungit.patch
c77df804ee5f665cd7f19efd6abe2364161c6715271d31a55bb1d1155fb5dc58ca824e8d8800a2cf650946c3a7cd751a2c22353238f481442d6319426dcbe4fe  obey-build-flags.patch
9e909d7d5468e717d8ca3c165bb3846f17f03bb7d1f19c424d7cc0e5ac282f1bad156c34c12b019a00100574e53b21d4245c028e13c662cad7048b3a956ede2c  keyd.initd
"
