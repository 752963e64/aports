# Contributor: SÃ¶ren Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer:
pkgname=platformio-core
pkgver=4.0.0
pkgrel=0
pkgdesc="An open source ecosystem for IoT development"
url="http://platformio.org"
arch="noarch"
license="Apache-2.0"
depends="py3-bottle py3-click5 py3-colorama py3-lockfile py3-requests
	py3-semanticversion py3-serial"
makedepends="py3-setuptools"
install=""
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/platformio/platformio-core/archive/v$pkgver.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	python3 setup.py build || return 1
	cd "$builddir"/scripts
	2to3 -w *.py
}

package() {
	cd "$builddir"
	python3 setup.py install --prefix=/usr \
		--root="$pkgdir" || return 1

	mkdir -p "$pkgdir"/usr/share/doc/$pkgname/
	install -m644 CONTRIBUTING.md README.rst HISTORY.rst \
		"$pkgdir"/usr/share/doc/$pkgname/ || return 1

}

sha512sums="e483850e7e1bd73522931da17b934116f44e730868ff424faa7bbb3b7853d0435ebb3fa3e6f8eab2bd57ada1d05140302b827b4724fe7981025cdc7660baff4c  platformio-core-4.0.0.tar.gz"
