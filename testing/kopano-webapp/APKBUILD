# Maintainer: Noel Kuntze <noel.kuntze@contauro.com>
pkgname=kopano-webapp
pkgdesc="WebApp for Kopano"
pkgver=5.2.0
pkgrel=0
# ppc64le, mips64 and riscv64 blocked by libmdbx -> kopano-core
# arch="noarch !ppc64le !mips64 !riscv64"
url="http://www.kopano.com/"
license="AGPL-3.0-only"
options="!check" # No test suite
depends="php7 nginx php7-fpm php7-json php7-gettext php7-iconv php7-session php7-openssl php7-simplexml php7-soap"
# kopano-core necessary for mapi php module
makedepends="apache-ant openjdk8 kopano-core bash gettext-dev libxml2-utils git nginx php7-soap"
replaces="zarafa-webapp"
subpackages="
	 kopano-webapp-contactfax:simple_plugin_splitfunc:noarch
	 kopano-webapp-gmaps:simple_plugin_splitfunc:noarch
	 kopano-webapp-pimfolder:simple_plugin_splitfunc:noarch
	 kopano-webapp-files:kopano_webapp_files_splitfunc:noarch
	 kopano-webapp-files-backend-smb:kopano_webapp_files_backend_smb_splitfunc:noarch
	 kopano-webapp-files-backend-owncloud:kopano_webapp_files_backend_owncloud_splitfunc:noarch
	 kopano-webapp-filepreviewer:kopano_webapp_filepreviewer_splitfunc:noarch
	 kopano-webapp-smime:kopano_webapp_smime_splitfunc:noarch
	 kopano-webapp-desktopnotifications:kopano_webapp_desktopnotifications_splitfunc:noarch
	 kopano-webapp-intranet:kopano_webapp_intranet_splitfunc:noarch
	 kopano-webapp-mdm:kopano_webapp_mdm_splitfunc:noarch
	 kopano-webapp-spellchecker:kopano_webapp_spellchecker_splitfunc:noarch
	 kopano-webapp-spellchecker-languagepack-german-at:languagepack_splitfunc:noarch
	 kopano-webapp-spellchecker-languagepack-german-ch:languagepack_splitfunc:noarch
	 kopano-webapp-spellchecker-languagepack-german-de:languagepack_splitfunc:noarch
	 kopano-webapp-spellchecker-languagepack-english-gb:languagepack_splitfunc:noarch
	 kopano-webapp-spellchecker-languagepack-english-us:languagepack_splitfunc:noarch
	 kopano-webapp-spellchecker-languagepack-spanish:languagepack_splitfunc:noarch
	 kopano-webapp-spellchecker-languagepack-french:languagepack_splitfunc:noarch
	 kopano-webapp-spellchecker-languagepack-italian-it:languagepack_splitfunc:noarch
	 kopano-webapp-spellchecker-languagepack-dutch:languagepack_splitfunc:noarch
	 kopano-webapp-fetchmail:kopano_webapp_fetchmail_splitfunc:noarch
	"
# 	 kopano-webapp-passwd:kopano_webapp_passwd_splitfunc

_pkgverfilepreviewer="2.2.0"
_commithashfilepreviewer=d425d79cf7f9d8b303099ea6c38af7a114bc96a2

_pkgversmime="2.2.2"

_pkgverdesktopnotifications="2.0.3"
_pkgverintranet="1.0.1"

_pkgvermobiledevicemanagement="3.0"
_commithashmdm=e6e87e8bf5a41585cb2e18bb297b989329c1f5da

#_pkgverpasswd="1.4.1"
#_commithashpasswd=593427340299b27c74afe71fdeda0b2025d3af9f
_pkgverfetchmail="1.3"
_commithashfetchmail=17ec9a66f0ea008e241afdbd76ae9df460561e52

_pkgverfiles="2.1.5"
_commithashfiles=97fd360250e3edccdc5b30d0d0424c0c8d4c144b
_pkgverbackendowncloud=3.0.1
_commithashfilesbackendowncloud=4478c77142814558077433d2358f613cc7cb8697
_pkgverbackendsmb=3.0.1
_commithashfilesbackendsmb=6eb3aa17f87e8a8e7fabd6a37d502ff19acf5b5d

_pkgverspellchecker="2.0.1"
_commithashspellchecker=098d71f829408d8185fb871f17770b2a87652690
_commithashlanguagepack_de_at=e9d8090cc847dfb5c710d57a55820d31f94b14c3
_commithashlanguagepack_de_ch=62f373a1eaebb81e2d8118fb2286102919364207
_commithashlanguagepack_de_de=637c35a1e6c5abaa3bc2e144e910def245d6c106
_commithashlanguagepack_en_gb=b32818f7b29a391506de80a2a47a483456631fa1
_commithashlanguagepack_en_us=2a874265d4ea74c4bd0388b57a3392a5a6e0ac99
_commithashlanguagepack_es_es=4d52b2ee29cb823127b50ae63ee5ea01a6e260fd
_commithashlanguagepack_fr_fr=cf9c2418e7adaf0c34b902def1c13d09b54c3d90
_pkgverspellcheckitalian_it="1.0.0"
_commithashlanguagepack_italian_it=761d0bc76c6c27fe0f23e91a43a1a97a19417c93
_commithashlanguagepack_nl=ecbc2cc58cd002f681869e50ce92eb4fac90b318
_commithashlanguagepack_pl_pl=b5780816d7dab7bdc6f5f6b44aa2db67b1b211e8

_commithashsmime=4f7e44c5e7ed65b879c38fee7952b89b8c94a3af
_commithashdesktopnotifications=472d10a0bd58a1a25caac8d9ce6755e0fde1e3db
_commithashintranet=54d54f09d4c939af25824f26b78223ed854a052a

pkgusers="kopano-webapp"
pkggroups="kopano-webapp"

install="kopano-webapp.pre-install"

source="kopano-webapp-$pkgver.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KW/repos/kopano-webapp/archive?at=refs%2Ftags%2Fv$pkgver&format=tar.gz
	nginx-location.conf
	php-fpm.example.conf
	kopano-webapp.conf
	kopano-webapp.ini
	compress-static
	0001-Fix-fatal-errors-in-translation-files.patch
	kopano-webapp-files-backend-smb-$_pkgverbackendsmb.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/files-smb-backend/archive?at=$_commithashfilesbackendsmb&format=tar.gz
	kopano-webapp-files-backend-owncloud-$_pkgverbackendowncloud.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/files-owncloud-backend/archive?at=$_commithashfilesbackendowncloud&format=tar.gz
	kopano-webapp-files-$_pkgverfiles.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/files/archive?at=$_commithashfiles&format=tar.gz
	kopano-webapp-files.ini
	kopano-webapp-filepreviewer-$_pkgverfilepreviewer.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/filepreviewer/archive?at=$_commithashfilepreviewer&format=tar.gz
	kopano-webapp-smime-$_pkgversmime.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/smime/archive?at=$_commithashsmime&format=tar.gz
	kopano-webapp-smime.ini
	kopano-webapp-desktopnotifications-$_pkgverdesktopnotifications.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/desktopnotifications/archive?at=$_commithashdesktopnotifications&format=tar.gz
	kopano-webapp-intranet-$_pkgverintranet.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/intranet/archive?at=$_commithashintranet&format=tar.gz
	kopano-webapp-mdm-$_pkgvermobiledevicemanagement.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/mobile-device-management/archive?at=$_commithashmdm&format=tar.gz
	kopano-webapp-spellchecker-$_pkgverspellchecker.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/spellchecker/archive?at=$_commithashspellchecker&format=tar.gz
	kopano-webapp-spellchecker.ini
	kopano-webapp-spellchecker-languagepack-german-at-$_pkgverspellchecker.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/spellchecker-languagepack-de-at/archive?at=$_commithashlanguagepack_de_at&format=tar.gz
	kopano-webapp-spellchecker-languagepack-german-ch-$_pkgverspellchecker.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/spellchecker-languagepack-de-ch/archive?at=$_commithashlanguagepack_de_ch&format=tar.gz
	kopano-webapp-spellchecker-languagepack-german-de-$_pkgverspellchecker.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/spellchecker-languagepack-de-de/archive?at=$_commithashlanguagepack_de_de&format=tar.gz
	kopano-webapp-spellchecker-languagepack-english-gb-$_pkgverspellchecker.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/spellchecker-languagepack-en-gb/archive?at=$_commithashlanguagepack_en_gb&format=tar.gz
	kopano-webapp-spellchecker-languagepack-english-us-$_pkgverspellchecker.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/spellchecker-languagepack-en-us/archive?at=$_commithashlanguagepack_en_us&format=tar.gz
	kopano-webapp-spellchecker-languagepack-spanish-$_pkgverspellchecker.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/spellchecker-languagepack-es-es/archive?at=$_commithashlanguagepack_es_es&format=tar.gz
	kopano-webapp-spellchecker-languagepack-french-$_pkgverspellchecker.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/spellchecker-languagepack-fr-fr/archive?at=$_commithashlanguagepack_fr_fr&format=tar.gz
	kopano-webapp-spellchecker-languagepack-italian-it-$_pkgverspellcheckitalian_it.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/spellchecker-languagepack-italian-it/archive?at=$_commithashlanguagepack_italian_it&format=tar.gz
	kopano-webapp-spellchecker-languagepack-dutch-$_pkgverspellchecker.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/spellchecker-languagepack-nl/archive?at=$_commithashlanguagepack_nl&format=tar.gz
	kopano-webapp-spellchecker-languagepack-polish-$_pkgverspellchecker.tar.gz::https://stash.kopano.io/rest/api/latest/projects/KWA/repos/spellchecker-languagepack-pl-pl/archive?at=$_commithashlanguagepack_pl_pl&format=tar.gz
	kopano-webapp-fetchmail-$_pkgverfetchmail.tar.gz::https://github.com/mpietruschka/kopano-webapp-fetchmail/archive/$_commithashfetchmail.tar.gz
"

#	0001-Remove-error-dev-stdout.patch"
# No passwd plugin for now because of no known good upstream and untested code
#kopano-webapp-passwd-$_pkgverpasswd.tar.gz::https://github.com/silentsakky/zarafa-webapp-passwd/archive/$_commithashpasswd.tar.gz

builddir="$srcdir/"


prepare() {
	olddir="$builddir"
	builddir="$srcdir/$pkgname"
	default_prepare
	builddir="$olddir"
}

#helper function
unpack() {
	local u
	verify
	initdcheck
	mkdir -p "$srcdir"
	local gunzip="$(command -v pigz || echo gunzip)"
	[ $gunzip = "/usr/bin/pigz" ] && gunzip="$gunzip -d"
	for u in $source; do
		local s
		local filename="$(filename_from_uri $u)"
		local new_root_dir="$builddir/${filename%%-[0-9]*}"
		if is_remote "$u"; then
			s="$SRCDEST/$filename"
		else
			s="$startdir/$u"
		fi
		case "$s" in
			*.tar)
				msg "Unpacking $s..."
				mkdir -p "$new_root_dir"
				tar -C "$new_root_dir" -xf "$s" ;;
			*.tar.gz|*.tgz)
				msg "Unpacking $s..."
				mkdir -p "$new_root_dir"
				$gunzip -c "$s" | tar -C "$new_root_dir" -x ;;
			*.tar.bz2)
				msg "Unpacking $s..."
				tar -C "$srcdir" -jxf "$s" ;;
			*.tar.lz)
				msg "Unpacking $s..."
				tar -C "$srcdir" --lzip -xf "$s" ;;
			*.tar.lzma)
				msg "Unpacking $s..."
				unlzma -T 0 -c "$s" | tar -C "$srcdir" -x  ;;
			*.tar.xz)
				msg "Unpacking $s..."
				local threads_opt
				if [ "$(readlink -f "$(command -v unxz)")" != "/bin/busybox" ]; then
					threads_opt="--threads=0"
				fi
				unxz $threads_opt -c "$s" | tar -C "$srcdir" -x ;;
			*.zip)
				msg "Unpacking $s..."
				unzip -n -q "$s" -d "$srcdir" ;;
		esac
	done
}

build() {
	# create translations, compress javascript-files
	cd kopano-webapp/
	ant deploy
	ant deploy-plugins
	# antdeploy-plugins leads to errors
	# execution one by one
	cd "$srcdir"
	for f in kopano-webapp-*; do
		if [ -d "$f" ]; then
			dest="kopano-webapp/plugins/${f//kopano-webapp-/}"
			test="$(find . -name "$f/$f-*" 2>/dev/null | head -n 1)"
			case "${f//kopano-webapp-/}" in
				spellchecker-languagepack-italian)
				dest=kopano-webapp/plugins/spellchecker-languagepack-italian-it
				;;
				files-backend-owncloud)
				dest=kopano-webapp/plugins/filesbackendOwncloud
				;;
				files-backend-smb)
				dest=kopano-webapp/plugins/filesbackendSMB
				;;
				fetchmail)
				mv "$f"/*/ "$dest"
				;;
				*)
				;;
			esac
			if [ -d "$test" ]; then
				mv "$test" "$dest"
			else
				mv "$f" "$dest"
			fi
			cd "$dest"*
			ant deploy -Droot-folder="$(pwd)/../../" -Dtarget-folder="$(pwd)/../../deploy/plugins"
			cd "$srcdir"
		fi
	done
}
package() {
	# application
	cd "$srcdir/kopano-webapp/deploy"
	mkdir -p "$pkgdir/usr/share/webapps/$pkgname/"

	cp -r -- * "$pkgdir/usr/share/webapps/$pkgname/"
	cp "$srcdir/kopano-webapp/.htaccess" "$pkgdir/usr/share/webapps/$pkgname/"
	rm -R -- "$pkgdir/usr/share/webapps/$pkgname/plugins/"*

	# set version
	echo "$pkgver" > "$pkgdir/usr/share/webapps/$pkgname/version"
	## precompress for nginx
	find "$pkgdir/usr/share/webapps/$pkgname" -type f -exec "$srcdir/compress-static" "{}" \;
	## config examples
	install -dm 0750 -g kopano-webapp "$pkgdir/etc/webapps/$pkgname/"
	install -Dm 0644 -g kopano-webapp "$srcdir/php-fpm.example.conf" "$srcdir/nginx-location.conf" "$pkgdir/etc/webapps/$pkgname/"
	install -Dm 0644 -g kopano-webapp "$srcdir/kopano-webapp.conf" "$pkgdir/etc/webapps/$pkgname/apache.example.conf"
	install -Dm 0644 -g kopano-webapp "$srcdir/nginx-location.conf" "$pkgdir/etc/webapps/$pkgname/nginx.example.conf"
	## config mains
	install -Dm 0644 -g kopano-webapp config.php.dist "$pkgdir/etc/webapps/$pkgname/config.php"
	sed -i 's%define("DEBUG_DUMP_FILE", BASE_PATH . "debug.txt");%define("DEBUG_DUMP_FILE",	"/var/log/kopano-webapp/debug.txt");%g' debug.php.dist

	sed -i -e 's|\(\"DEBUG_LOADER\", \).*$|\1LOAD_RELEASE);|' debug.php.dist
	install -Dm 0644 debug.php.dist "$pkgdir/etc/webapps/$pkgname/debug.php.dist"
	ln -sf "/etc/webapps/$pkgname/config.php" "$pkgdir/usr/share/webapps/$pkgname/config.php"
	ln -sf "/etc/webapps/$pkgname/debug.php" "$pkgdir/usr/share/webapps/$pkgname/debug.php"
	## php
	install -Dm 0644 "$srcdir/$pkgname.ini" "$pkgdir/etc/php7/conf.d/$pkgname.ini"
	## php-fpm
	install -Dm 0644 "$srcdir/$pkgname.conf" "$pkgdir/etc/php7/php-fpm.d/$pkgname.conf"
	# /var/lib
	install -dm 0770 -g kopano-webapp "$pkgdir/var/lib/$pkgname/" "$pkgdir/var/lib/$pkgname/plugins" "$pkgdir/var/log/$pkgname"
	install -dm 0770 -g kopano-webapp "$pkgdir/var/lib/$pkgname/tmp"
	touch "$pkgdir/var/log/$pkgname/debug.txt"
	ln -sf "/var/log/$pkgname/debug.txt" "$pkgdir/usr/share/webapps/$pkgname/debug.txt"
	chown root:kopano-webapp "$pkgdir/usr/share/webapps/$pkgname"
	chmod 750 "$pkgdir/usr/share/webapps/$pkgname"
	chmod 660 "$pkgdir/var/log/$pkgname/debug.txt"
	chown root:kopano-webapp "$pkgdir/var/log/$pkgname/debug.txt"
	# fix access
	chmod 644 "$pkgdir/usr/share/webapps/kopano-webapp/client/kopano.js.map"
	# copy dompurify
	install -dm 755 "$pkgdir/usr/share/webapps/kopano-webapp/client/dompurify"
	# we're currently in srcdir/kopano-webapp/deploy
	install -Dm 644 ../client/dompurify/*.js* "$pkgdir/usr/share/webapps/kopano-webapp/client/dompurify/"
}

simple_plugin_splitfunc() {
	depends="kopano-webapp"
	package_plugin
}
kopano_webapp_contactfax_splitfunc() {
	depends="kopano-webapp"
	package_plugin
}
kopano_webapp_gmaps_splitfunc() {
	depends="kopano-webapp"
	package_plugin
}
kopano_webapp_pimfolder_splitfunc() {
	depends="kopano-webapp"
	package_plugin
}
# STANDALONE PLUGINS
#
# Avoid wrong version by assigning version to each plugin
#
kopano_webapp_files_splitfunc() {
	depends="kopano-webapp"
	pluginname=$(sh -c "echo ${subpkgname//kopano-webapp-/}")
	cd "$srcdir/kopano-webapp/deploy/plugins/$pluginname"
	## perform settings
	sed -i -e "s|\(PLUGIN_FILESBROWSER_LOGLEVEL', \)\(.*\)\();$\)|\1'ERROR'\3|" config.php
	sed -i -e "s|\(PLUGIN_FILES_CACHE_DIR', \)\(.*\)\();$\)|\1'/var/lib/kopano-webapp/plugins/files'\3|" config.php
	package_plugin
}
kopano_webapp_files_backend_owncloud_splitfunc() {
	depends="kopano-webapp-files"
	pluginname=filesbackendOwncloud
	package_plugin filesbackendOwncloud
}
kopano_webapp_files_backend_smb_splitfunc() {
	depends="kopano-webapp-files"
	pluginname=filesbackendSMB
	package_plugin
}
kopano_webapp_filepreviewer_splitfunc() {
	depends="kopano-webapp"
	package_plugin
}
kopano_webapp_smime_splitfunc() {
	depends="kopano-webapp"
	pluginname=$(sh -c "echo ${subpkgname//kopano-webapp-/}")
	cd "$srcdir/kopano-webapp/deploy/plugins/$pluginname"
	## perform settings
	sed -i -e "s/\(PLUGIN_SMIME_CIPHER', \)\(.*\)\();$\)/\1OPENSSL_CIPHER_AES_256_CBC\3/" config.php
#	sed -i -e "s/\(PLUGIN_SMIME_CACERTS', \)\(.*\)\();$\)/\1\\'/etc/ssl/certs\\'\3/" config.php
	package_plugin
}
kopano_webapp_desktopnotifications_splitfunc() {
	depends="kopano-webapp"
	pluginname=$(sh -c "echo ${subpkgname//kopano-webapp-/}")
	cd "$srcdir/kopano-webapp/deploy/plugins/$pluginname"
	## perform settings
	sed -i -e "s/\(PLUGIN_DESKTOPNOTIFICATION_USER_DEFAULT_ENABLE', \)\(.*\)\();$\)/\1true\3/" config.php
	package_plugin
}
kopano_webapp_intranet_splitfunc() {
	depends="kopano-webapp"
	package_plugin
}
kopano_webapp_mdm_splitfunc() {
	depends="kopano-webapp z-push php7-soap"
	pluginname="${subpkgname//kopano-webapp-/}"
	cd "$srcdir/kopano-webapp/deploy/plugins/$pluginname"
	## perform settings
	sed -i -e "s/\(PLUGIN_MDM_USER_DEFAULT_ENABLE_MDM', \)\(.*\)\();$\)/\1true\3/" config.php
	sed -i -e "s/\(PLUGIN_MDM_SERVER', \)\(.*\)\();$\)/\1'127.0.0.1:81'\3/" config.php
	sed -i -e "s/\(PLUGIN_MDM_SERVER_SSL', \)\(.*\)\();$\)/\1false\3/" config.php
	package_plugin
}
kopano_webapp_spellchecker_splitfunc() {
	depends="kopano-webapp php-enchant"
	package_plugin
}
languagepack_splitfunc() {
	depends="kopano-webapp-spellchecker"
	package_plugin
}
kopano_webapp_fetchmail_splitfunc() {
	depends="kopano-webapp php7-mysqli"
	package_plugin
}
# FUNCTIONS
package_plugin() {
	: "${pluginname:="${subpkgname//kopano-webapp-/}"}"
	echo "Pluginname: $pluginname" >&2

	echo "Packaging $pkgname with pluginname $pluginname" >&2
	cd "$srcdir/kopano-webapp/deploy/plugins/$pluginname/"
	# /usr/share
	mkdir -p "$subpkgdir/usr/share/webapps/kopano-webapp/plugins/$pluginname/"
	cp -R -- * "$subpkgdir/usr/share/webapps/kopano-webapp/plugins/$pluginname/"
	rm -f "$subpkgdir/usr/share/webapps/kopano-webapp/plugins/$pluginname/config.php"
	"$srcdir/compress-static" "$subpkgdir/usr/share/webapps/kopano-webapp/plugins/$pluginname/"
	# /var/lib
	install -dm 0700 -o kopano-webapp -g root "$subpkgdir/var/lib/kopano-webapp/plugins/$pluginname"
	# /etc
	if [ -e "config.php" ]; then
		## perform settings
		# convert windows line break to unix: http://stackoverflow.com/questions/11680815/removing-windows-newlines-on-linux-sed-vs-awk
		sed -i -e $'s/\r//' config.php
		install -dm 0750 -g kopano-webapp "$subpkgdir/etc/webapps/kopano-webapp/plugins/$pluginname/"
		## config mains
		install -m 0750 -g kopano-webapp config.php "$subpkgdir/etc/webapps/kopano-webapp/plugins/$pluginname/config.php"
		ln -sf "/etc/webapps/kopano-webapp/plugins/$pluginname/config.php" "$subpkgdir/usr/share/webapps/kopano-webapp/plugins/$pluginname/config.php"
		## config examples
		install -m 0750 "$subpkgdir/etc/webapps/kopano-webapp/plugins/$pluginname/config.php" "$subpkgdir/etc/webapps/kopano-webapp/plugins/$pluginname/config.example.php"
	fi
	if [ -e "$srcdir/$pluginname.ini" ];	then
	  ## php
	  mkdir -p "$subpkgdir/etc/php/conf.d"
	  cp "$srcdir/$pluginname.ini" "$subpkgdir/etc/php/conf.d"
	fi
}

sha512sums="edf532dffefe2da78680aed15411755da047184e57ae412f69511a5c4578154612983a10cd15d71275234aa4ec5c9d4bcf46da2ec0fa8307c04cb59c95799c18  kopano-webapp-5.2.0.tar.gz
849f08412c6754603cf6d31866ae0b257719530861fcb40fd6acc4530576da59c45792eecf0ff483de41398401a21f1b20e36f1183c8cfbb88053b1b8bd603f4  nginx-location.conf
bad70098b919c4cacce3152b276da489d7a36ca195b607508ad316211401dc98f07433ef505deb82a91388993e58b398cce2bc3eb295cf812362bae96b40fb35  php-fpm.example.conf
bdfe3960f88c776264e4caae47404a3647508f545f915a5aa205d486415d32c5ac89f8b4dbd9905a0b0751ec0ed42a2aef690cf8bca20f66e1f322141fad0f01  kopano-webapp.conf
062103e4ebf63c5dc4589d25e03f5ebe1df711613d5ea27a27265f3041832677ed384a16460e2bf8905c59f800abc84ef30a70512738c2cb335b76d275332ce8  kopano-webapp.ini
a9421b4206f06ec9e61a79fad5907b3616d030386585ee06af8fc20d376b2023e0ca65fa20ef290029d3a0eb523f6ef8ed3d7a8be48a5340285ed2f004d99f9c  compress-static
f4d77690324eff874c22ff92a3717cc719fd66c0295baf60213cd8fbaa59110a8c4ca238caae9c36d4e606cbe56c7462c18225f917aaebac42b45e6b7683f0df  0001-Fix-fatal-errors-in-translation-files.patch
2fa863a37a5446936f2638cfc3814bd3ed192c263bf033987c66f002177a773af3ab71a39f67a80140a60cbb18c7854f0bb9810c4224c197bc1c66eaccc19764  kopano-webapp-files-backend-smb-3.0.1.tar.gz
386187188d4d737fc05307d11c5da241d00de4ed78f97d5ecb70b3b5cf92e369b8a10cce64dade8ee2c08b95da2223cd8b332564dd87f851480341d27dbe01c8  kopano-webapp-files-backend-owncloud-3.0.1.tar.gz
16d380d0f3a25dbe53d01194a9a51509adf137c392fdfd9864c4c43cc3cb16c56a6255e303d7472893c4d0831ced9aa68aaa8292d3919d1f8f31d58e316e08c8  kopano-webapp-files-2.1.5.tar.gz
8bda45524ba341753a1503e5a8bf2b4f73a365d9cf9b71c0e33cdb1f3b2a32b39186bad39fedc4a955d724884dee6333ceb218a44859151cb1964932c4fab198  kopano-webapp-files.ini
2fa79031066e48a80eac8e32a3a3bab30c2a767a7bbdc0a5bc46016fe91dfcae2054161e63b511de57dff3560a3f4a8d8dda9a3ed3b0242f1cfa7a11da46008c  kopano-webapp-filepreviewer-2.2.0.tar.gz
7968bb4a010acfdc5971adf297a9ac82aadeb83ea92fec12929895b56942bbd85bf93061ef0cf80a868d7963e82879c79c47d79244735bfaac04891f3611cf99  kopano-webapp-smime-2.2.2.tar.gz
ac1117716118eff3d0620cc644ed87b9f193194ec78eda23ab40df4b2f2ba5e580c6a7596f78446bc46d0974e541f6c62823252001045942428de567d7c28305  kopano-webapp-smime.ini
00ca46ca96dd00ea93ab1cf0652b9347af247b19848e330717cd5742014f0f02625a4fee0b2f192468e7c197dff381804ac1d84b1077525e459d13b190657770  kopano-webapp-desktopnotifications-2.0.3.tar.gz
4b341ad43969789612ec0f1f0ad7b176680bc548968329a3f1bf4d7349b9d33b59bbb6dfbc80d67bf64d62fc9f34b19044e50597eea4167c0a5ad7a4b2d31e33  kopano-webapp-intranet-1.0.1.tar.gz
caa18cf6d9350ed7b49dfa8c7bad61295664c10b9096a75dcaeca1afa2e658b51fde2f4e256270fe39d747dac2d4b526e0d72ca3e9a947d9222661ecda889711  kopano-webapp-mdm-3.0.tar.gz
5b094c9354b0d4fd9aa2f9d5ba9fc4f726df7fcef4ba8d6a13e0cd713a6c0a3dab13ec420666221825425a5e522f96763b535b709fc3832ee7c51faf49d5ae96  kopano-webapp-spellchecker-2.0.1.tar.gz
e8bf6c3fa6baf8638116a032a767dc5c4ab9e989c553e8d5f3510e3f6c8de8b23f6917bcb0a6203d1686bf98efb1b0b88d7d5c2c14909a3e3b0a70927fce20bb  kopano-webapp-spellchecker.ini
07c34bfc5485052a7fba73dea60367ce686442fa4b93c41dcd8b7fcd35fe55fba834e9a0939c90ad0d8c9160651997d96281e00a240b5b00fd20a7791152503e  kopano-webapp-spellchecker-languagepack-german-at-2.0.1.tar.gz
3da0a2be0f29c16ae2513223436c55ca4dba099a63d39b4cde08bf680a81aab2819bddd7d2ae2f517f144646d02fedc79b43032ed03e3b0d1eb21faa95f39046  kopano-webapp-spellchecker-languagepack-german-ch-2.0.1.tar.gz
c28c43ea92e99d64e10564ea3bbbf2e19d66020bb65a8195a0c3c32a1704476edd8b9db86882b54f19bdbcf5fcb4db94f74065eeddbd77267025acdcd392e031  kopano-webapp-spellchecker-languagepack-german-de-2.0.1.tar.gz
178a95e4fe5d0ad0b3729d6d45ce2f20e43963a4b224b6f0ddeee4c1fa202e12d5bbcea15459985d74f2b48c243c611d0bd59aab973d97b93a4f678951dd7030  kopano-webapp-spellchecker-languagepack-english-gb-2.0.1.tar.gz
833627b6a0f9d84ff2c2a7ce8ebd65ce8c3fcd4e060046d8a7e16767791dcbca8973c915181421dc4792f282f40fd83f896ac6ee9c939aeb48c5f39f3b4ae151  kopano-webapp-spellchecker-languagepack-english-us-2.0.1.tar.gz
3dd104a98b6245c8b4506f2b558951e1483829513ed56aef8d89fbd65f828aff900d1654567989a7a3ec6245f5d38275520126175055f333ee94ae57d47c9b76  kopano-webapp-spellchecker-languagepack-spanish-2.0.1.tar.gz
d7d4b67ae58d374ae3d854d103843aa8c7d9adfc9bb9fd032197b97c62f03d706588d9e4e70c7664f4831199133f331c5c02098e7c5f66ebbd5a88a01c0d8ebb  kopano-webapp-spellchecker-languagepack-french-2.0.1.tar.gz
2dc91897bf3248f2cb953d3d47ff509fcbefb32f4a0d547ce4e15c1105fd44eb396324cde0e9cf96320a98458f571efb1c8a65c43468463677e3f1341d6602f1  kopano-webapp-spellchecker-languagepack-italian-it-1.0.0.tar.gz
53b2b3d9fe4f89a1a24e0483abdc105649245f85fc5bc0919ae785e7819b9073a63c9f02123cb60a597abb95d92037f694118647449d8612cdbaf5001c7e09af  kopano-webapp-spellchecker-languagepack-dutch-2.0.1.tar.gz
c99f93fa07305af91aed858a043711074797c91d9477070cada647f8adc8fa764f8b30d73e32381b9b1b7eaaa0ef976d39600e5a319af66ea602ff439747a52e  kopano-webapp-spellchecker-languagepack-polish-2.0.1.tar.gz
b643861de447cfa50ba976237acd33de2f03a97f4bff535cedd144c441214310070f32a5b38af9f66bb4a7885e68f70572a5e257472f3f06a01be394033c2d25  kopano-webapp-fetchmail-1.3.tar.gz"
